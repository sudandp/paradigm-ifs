import{j as e,u as Ce,k as ke,m as o,T as Re,B as c}from"./index-D5q3SS3D.js";import{b as s,u as Se}from"./react-vendor-BUaIliXj.js";import{M as se}from"./Modal-CR2aBU6L.js";import{L as Me}from"./LoadingScreen-_hPz2y_i.js";import{a as Ae}from"./excelExport-B_NduTpG.js";import{$ as De,ao as ee,U as Fe,f as Te,aq as _e,a2 as te,g as W,X as G,i as Ee,j as Le,b4 as Oe,e as Ie,bm as ze}from"./ui-vendor-B8EvWqdc.js";import{f as R}from"./utils-vendor-DmorxLnX.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./supabase-7WG3J4rU.js";import"./FileSaver.min-C7cHFFkD.js";const ae=({isOpen:r,onClose:a,onConfirm:i,isConfirming:C,title:j="Reject Claim",label:f="Please provide a reason for rejecting this claim. This will be visible to the employee.",confirmButtonText:N="Confirm Rejection"})=>{const[S,v]=s.useState(""),[m,b]=s.useState(""),E=()=>{if(!S.trim()){b("A reason for rejection is required.");return}i(S)},D=()=>{v(""),b(""),a()};return r?e.jsx(se,{isOpen:r,onClose:D,onConfirm:E,title:j,confirmButtonText:N,isConfirming:C,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:f}),e.jsxs("div",{children:[e.jsx("textarea",{value:S,onChange:F=>{v(F.target.value),m&&b("")},rows:3,className:`mt-1 form-input ${m?"form-input--error":""}`,placeholder:"e.g., Overtime was not pre-approved."}),m&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:m})]})]})}):null},Pe=({isOpen:r,onClose:a,onConfirm:i,currentType:C,isUpdating:j})=>{const[f,N]=s.useState(C),S=["Earned","Sick","Floating","Comp Off","Loss of Pay"];s.useEffect(()=>{r&&N(C)},[r,C]);const v=()=>{i(f)};return r?e.jsx(se,{isOpen:r,onClose:a,onConfirm:v,title:"Edit Leave Type",confirmButtonText:"Save Changes",isConfirming:j,children:e.jsxs("div",{className:"space-y-4 my-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Select the correct leave type for this request. If the leave is already approved, balances (including Comp Off logs) will be automatically adjusted."}),e.jsxs("div",{className:"pt-2",children:[e.jsx("span",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1 tracking-wider",children:"Leave Type"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:f,onChange:m=>N(m.target.value),className:"w-full h-11 rounded-xl bg-gray-50 border border-gray-200 text-gray-900 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all appearance-none text-sm font-medium px-4 pr-10",children:S.map(m=>e.jsx("option",{value:m,children:m},m))}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})]})}):null},Ue=({status:r,approverName:a,approvalHistory:i})=>{const C={pending_manager_approval:"bg-yellow-100 text-yellow-800",pending_hr_confirmation:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",withdrawn:"bg-gray-100 text-gray-600"};let j=r.replace(/_/g," ");if((r==="pending_manager_approval"||r==="pending_hr_confirmation")&&a)j=`Pending from ${a}`;else if(r==="approved"&&i&&i.length>0){const f=i[i.length-1];j=`Approved by ${f.approverName||f.approver_name}`}else if(r==="rejected"&&i&&i.length>0){const f=i[i.length-1];j=`Rejected by ${f.approverName||f.approver_name}`}return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full capitalize ${C[r]}`,children:j})},$e=({status:r})=>{const a={Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full capitalize ${a[r]}`,children:r})},et=()=>{const r=Se(),{user:a}=Ce(),[i,C]=s.useState([]),[j,f]=s.useState([]),[N,S]=s.useState(0),[v,m]=s.useState(1),[b,E]=s.useState(20),[D,F]=s.useState(!0),[x,le]=s.useState("pending_manager_approval"),[X,re]=s.useState([]),[ne,ie]=s.useState([]),[Be,de]=s.useState([]),[u,Q]=s.useState("all"),[w,Y]=s.useState(""),[L,d]=s.useState(null),[h,y]=s.useState(null),J=ke("(max-width: 767px)"),[T,K]=s.useState(!0),[oe,O]=s.useState(!1),[ce,I]=s.useState(!1),[z,P]=s.useState(null),[U,$]=s.useState(null),[me,pe]=s.useState("hr"),[xe,B]=s.useState(!1),[M,H]=s.useState(null);s.useEffect(()=>{const t=async()=>{try{await o.checkCompOffTableExists(),K(!0)}catch{K(!1)}},l=async()=>{try{const p=await o.getApprovalWorkflowSettings();pe(p.finalConfirmationRole)}catch(p){console.error("Failed to fetch approval settings:",p)}},n=async()=>{try{let p;["admin","super_admin"].includes(a?.role||"")?p=await o.getUsers():p=await o.getTeamMembers(a?.id||""),re(p.map(g=>({id:g.id,name:g.name})).sort((g,A)=>g.name.localeCompare(A.name)))}catch(p){console.error("Failed to fetch users:",p)}};t(),l(),n()},[]);const k=s.useCallback(async()=>{if(a){F(!0);try{const t=["admin","hr","operation_manager","site_manager","reporting_manager"].includes(a.role);let l={status:x!=="all"&&x!=="claims"?x:void 0,userId:u!=="all"?u:void 0,startDate:w||void 0,endDate:w||void 0,page:v,pageSize:b};if(!["admin","super_admin"].includes(a.role)){const q=(await o.getTeamMembers(a.id)).map(Ne=>Ne.id);u!=="all"?l.userId=q.includes(u)?u:"none":l.userIds=q}const n={status:t?"Pending":void 0,userId:u!=="all"?u:void 0,workDate:w||void 0,page:v,pageSize:b},[p,g,A,V]=await Promise.all([o.getLeaveRequests(l),x==="claims"&&t?o.getExtraWorkLogs(n):Promise.resolve({data:[],total:0}),x==="holiday_selection"?o.getAllUserHolidays():Promise.resolve([]),x==="holiday_selection"?o.getInitialAppData():Promise.resolve(null)]);C(p.data),f(g.data),ie(A),V&&de(V.holidays.filter(Z=>Z.isPoolHoliday)),S(x==="claims"?g.total:x==="holiday_selection"?A.length:p.total)}catch{d({message:"Failed to load approval data.",type:"error"})}finally{F(!1)}}},[a,x,v,b,u,w]);s.useEffect(()=>{m(1)},[x,u,w]),s.useEffect(()=>{k()},[k]);const _=async(t,l)=>{if(a){y(t);try{switch(l){case"approve":await o.approveLeaveRequest(t,a.id);break;case"reject":await o.rejectLeaveRequest(t,a.id);break;case"confirm":await o.confirmLeaveByHR(t,a.id);break}d({message:"Request actioned successfully.",type:"success"}),k()}catch{d({message:"Failed to update request.",type:"error"})}finally{y(null)}}},ue=async t=>{if(a){y(t);try{await o.approveExtraWorkClaim(t,a.id),d({message:"Claim approved successfully.",type:"success"}),k()}catch{d({message:"Failed to approve claim.",type:"error"})}finally{y(null)}}},he=async t=>{if(!(!a||!z)){y(z.id);try{await o.rejectExtraWorkClaim(z.id,a.id,t),d({message:"Claim rejected successfully.",type:"success"}),k()}catch{d({message:"Failed to reject claim.",type:"error"})}finally{y(null),O(!1),P(null)}}},fe=async t=>{if(!(!a||!M)){y(M.id);try{await o.updateLeaveType(M.id,t),d({message:"Leave type updated successfully.",type:"success"}),k()}catch{d({message:"Failed to update leave type.",type:"error"})}finally{y(null),B(!1),H(null)}}},ye=async t=>{if(!(!a||!U)){y(U.id);try{await o.cancelApprovedLeave(U.id,a.id,t),d({message:"Leave cancelled successfully.",type:"success"}),k()}catch{d({message:"Failed to cancel leave.",type:"error"})}finally{y(null),I(!1),$(null)}}},ge=async t=>{if(a&&window.confirm("Are you sure you want to reconsider this rejected request? It will be reset to Pending Manager Approval.")){y(t.id);try{await o.reconsiderLeaveRequest(t.id,a.id),d({message:"Request reset for reconsideration.",type:"success"}),k()}catch{d({message:"Failed to reconsider leave.",type:"error"})}finally{y(null)}}},je=async()=>{if(i.length===0){d({message:"No data available to export.",type:"error"});return}const t=[{header:"Employee",key:"userName",width:25},{header:"Leave Type",key:"leaveType",width:15},{header:"Start Date",key:"startDate",width:15},{header:"End Date",key:"endDate",width:15},{header:"Option",key:"dayOption",width:10},{header:"Reason",key:"reason",width:40},{header:"Status",key:"status",width:20},{header:"Applied On",key:"createdAt",width:20}],l=i.map(n=>({...n,startDate:R(new Date(n.startDate.replace(/-/g,"/")),"dd MMM yyyy"),endDate:R(new Date(n.endDate.replace(/-/g,"/")),"dd MMM yyyy"),createdAt:n.createdAt?R(new Date(n.createdAt),"dd MMM yyyy HH:mm"):"N/A",status:n.status.replace(/_/g," ").toUpperCase(),dayOption:n.dayOption||"N/A"}));try{await Ae(l,t,"Leave Requests Report",{startDate:w?new Date(w):new Date(new Date().getFullYear(),0,1),endDate:w?new Date(w):new Date},"Leave_Requests",void 0,a?.name),d({message:"Report exported successfully.",type:"success"})}catch(n){console.error("Export failed:",n),d({message:"Failed to export report.",type:"error"})}},ve=["pending_manager_approval","claims","pending_hr_confirmation","holiday_selection","approved","rejected","all"].filter(t=>!(t==="pending_hr_confirmation"&&me==="reporting_manager")),be=({request:t})=>{if(!a)return null;const l=["admin","super_admin"].includes(a.role),n=t.currentApproverId===a.id||l;return l||n?e.jsxs("div",{className:"flex gap-2",children:[n&&e.jsxs(e.Fragment,{children:[t.status==="pending_manager_approval"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{size:"sm",variant:"icon",onClick:()=>_(t.id,"approve"),disabled:h===t.id,title:"Approve","aria-label":"Approve request",children:e.jsx(W,{className:"h-4 w-4 text-green-600"})}),e.jsx(c,{size:"sm",variant:"icon",onClick:()=>_(t.id,"reject"),disabled:h===t.id,title:"Reject","aria-label":"Reject request",children:e.jsx(G,{className:"h-4 w-4 text-red-600"})})]}),t.status==="pending_hr_confirmation"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{size:"sm",variant:"icon",onClick:()=>_(t.id,"confirm"),disabled:h===t.id,title:"Confirm & Finalize","aria-label":"Confirm and finalize request",children:e.jsx(W,{className:"h-4 w-4 text-blue-600"})}),e.jsx(c,{size:"sm",variant:"icon",onClick:()=>_(t.id,"reject"),disabled:h===t.id,title:"Reject","aria-label":"Reject request",children:e.jsx(G,{className:"h-4 w-4 text-red-600"})})]})]}),isHRAdmin&&!["rejected","cancelled","withdrawn"].includes(t.status)&&e.jsx(c,{size:"sm",variant:"icon",onClick:()=>{H(t),B(!0)},disabled:h===t.id,title:"Edit Leave Type","aria-label":"Edit leave type",children:e.jsx(Oe,{className:"h-4 w-4 text-primary"})}),t.status==="approved"&&(isHRAdmin||t.currentApproverId===a.id)&&e.jsx(c,{size:"sm",variant:"icon",onClick:()=>{$(t),I(!0)},disabled:h===t.id,title:"Cancel Approved Leave","aria-label":"Cancel approved leave",children:e.jsx(Ie,{className:"h-4 w-4 text-orange-600"})}),t.status==="rejected"&&l&&e.jsx(c,{size:"sm",variant:"icon",onClick:()=>ge(t),disabled:h===t.id,title:"Reconsider Request","aria-label":"Reconsider rejected request",children:e.jsx(ze,{className:"h-4 w-4 text-primary"})})]}):null},we=t=>t.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase());return D?e.jsx(Me,{message:"Loading approval data..."}):e.jsxs("div",{className:"p-4 border-0 shadow-none md:bg-card md:p-6 md:rounded-xl md:shadow-card",children:[L&&e.jsx(Re,{message:L.message,type:L.type,onDismiss:()=>d(null)}),e.jsx(ae,{isOpen:oe,onClose:()=>{O(!1),P(null)},onConfirm:he,isConfirming:!!h}),e.jsx(ae,{isOpen:ce,onClose:()=>{I(!1),$(null)},onConfirm:ye,isConfirming:!!h,title:"Cancel Approved Leave",label:"Reason for cancellation"}),M&&e.jsx(Pe,{isOpen:xe,onClose:()=>{B(!1),H(null)},onConfirm:fe,currentType:M.leaveType,isUpdating:h===M.id}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-text",children:"Leave Approval Inbox"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"secondary",onClick:je,className:"border border-border hover:bg-page transition-colors",disabled:i.length===0,children:[e.jsx(De,{className:"mr-2 h-4 w-4"})," Export Report"]}),!J&&e.jsxs(c,{onClick:()=>r("/hr/leave-management/grant-comp-off"),disabled:!T,title:T?"Grant a compensatory off day":"Feature disabled: 'comp_off_logs' table missing in database.",style:{backgroundColor:"#006B3F",color:"#FFFFFF",borderColor:"#005632"},className:"border hover:opacity-90 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"})," Grant Comp Off"]})]})]}),J&&e.jsx("div",{className:"mb-6",children:e.jsxs(c,{onClick:()=>r("/hr/leave-management/grant-comp-off"),disabled:!T,title:T?"Grant a compensatory off day":"Feature disabled: 'comp_off_logs' table missing in database.",style:{backgroundColor:"#006B3F",color:"#FFFFFF",borderColor:"#005632"},className:"w-full justify-center border hover:opacity-90 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"})," Grant Comp Off"]})}),e.jsx("div",{className:"bg-card p-5 rounded-xl border border-border shadow-sm mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-5 items-end",children:[e.jsxs("div",{className:"w-full lg:w-72",children:[e.jsx("label",{htmlFor:"filter-employee",className:"block text-xs font-bold text-muted uppercase mb-2 ml-1 tracking-wider",children:"Filter by Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted pointer-events-none"}),e.jsxs("select",{id:"filter-employee",name:"filterEmployee",value:u,onChange:t=>Q(t.target.value),className:"w-full !pl-10 pr-10 h-11 rounded-xl bg-page border border-border text-primary-text focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all appearance-none text-sm font-medium",children:[e.jsx("option",{value:"all",children:"All Employees"}),X.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("div",{className:"absolute right-3.5 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"w-full lg:w-56",children:[e.jsx("label",{htmlFor:"filter-date",className:"block text-xs font-bold text-muted uppercase mb-2 ml-1 tracking-wider",children:"Filter by Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted pointer-events-none"}),e.jsx("input",{id:"filter-date",name:"filterDate",type:"date",value:w,onChange:t=>Y(t.target.value),className:"w-full !pl-10 pr-4 h-11 rounded-xl bg-page border border-border text-primary-text focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all text-sm font-medium"})]})]}),e.jsxs("div",{className:"flex gap-3 w-full lg:w-auto",children:[e.jsxs(c,{variant:"secondary",onClick:()=>{Q("all"),Y("")},className:"h-11 px-5 rounded-xl flex-1 lg:flex-none font-semibold border-border bg-page hover:bg-page/80",disabled:u==="all"&&!w,children:[e.jsx(_e,{className:"h-4 w-4 mr-2"})," Clear"]}),e.jsxs(c,{onClick:k,className:"h-11 px-6 rounded-xl flex-1 lg:flex-none font-semibold text-white shadow-lg shadow-emerald-600/20 transition-all hover:scale-[1.02] active:scale-[0.98]",style:{backgroundColor:"#10b981"},children:[e.jsx(te,{className:`h-4 w-4 mr-2 ${D?"animate-spin":"hidden"}`}),"Refresh"]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-full sm:w-auto md:border-b border-border",children:e.jsx("nav",{className:"flex flex-col md:flex-row md:space-x-6 md:overflow-x-auto space-y-1 md:space-y-0","aria-label":"Tabs",children:ve.map(t=>e.jsx("button",{onClick:()=>le(t),className:`whitespace-nowrap font-medium text-sm rounded-lg md:rounded-none w-full md:w-auto text-left md:text-center px-4 py-3 md:px-1 md:py-3 md:bg-transparent md:border-b-2 transition-colors duration-200
                                ${x===t?"bg-emerald-50 text-emerald-700 md:border-emerald-500 md:bg-transparent":"text-muted hover:bg-emerald-50 hover:text-emerald-700 md:border-transparent md:hover:border-emerald-500"}`,children:we(t)},t))})})}),x==="claims"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full responsive-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Date & Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Claim"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border md:bg-card md:divide-y-0",children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-10 text-muted",children:"No pending claims found."})}):j.map(t=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Employee",className:"px-4 py-3 font-medium",children:t.userName}),e.jsxs("td",{"data-label":"Date & Type",className:"px-4 py-3 text-muted",children:[R(new Date(t.workDate),"dd MMM, yyyy")," (",t.workType,")"]}),e.jsxs("td",{"data-label":"Claim",className:"px-4 py-3 text-muted",children:[t.claimType,t.claimType==="OT"?` (${t.hoursWorked} hrs)`:""]}),e.jsx("td",{"data-label":"Reason",className:"px-4 py-3 text-muted whitespace-normal break-words max-w-sm",children:t.reason}),e.jsx("td",{"data-label":"Status",className:"px-4 py-3",children:e.jsx($e,{status:t.status})}),e.jsx("td",{"data-label":"Actions",className:"px-4 py-3",children:e.jsxs("div",{className:"flex md:justify-start justify-end gap-2",children:[e.jsx(c,{size:"sm",variant:"icon",onClick:()=>ue(t.id),disabled:h===t.id,title:"Approve Claim",children:e.jsx(W,{className:"h-4 w-4 text-green-600"})}),e.jsx(c,{size:"sm",variant:"icon",onClick:()=>{P(t),O(!0)},disabled:h===t.id,title:"Reject Claim",children:e.jsx(G,{className:"h-4 w-4 text-red-600"})})]})})]},t.id))})]})}):x==="holiday_selection"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full responsive-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Selected Holidays"})]})}),e.jsx("tbody",{className:"divide-y divide-border md:bg-card md:divide-y-0",children:X.filter(t=>u==="all"||t.id===u).map(t=>{const l=ne.filter(g=>g.userId===t.id),n=l.length>=5,p=l.length>0&&l.length<5;return e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Employee",className:"px-4 py-3 font-medium",children:t.name}),e.jsx("td",{"data-label":"Status",className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${n?"bg-green-100 text-green-700":p?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-500"}`,children:[l.length," / 5 Selected"]})}),e.jsx("td",{"data-label":"Selected Holidays",className:"px-4 py-3 text-sm text-muted",children:l.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:l.map((g,A)=>e.jsxs("span",{className:"bg-emerald-50 text-emerald-700 px-2 py-0.5 rounded text-[11px] whitespace-nowrap",children:[g.holidayName," (",R(new Date(g.holidayDate.replace(/-/g,"/")),"dd MMM"),")"]},A))}):e.jsx("span",{className:"italic text-gray-400",children:"No holidays selected"})})]},t.id)})})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full responsive-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Dates"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Raised On"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border md:bg-card md:divide-y-0",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-10 text-muted",children:"No requests found for this filter."})}):i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Employee",className:"px-4 py-3 font-medium",children:t.userName}),e.jsxs("td",{"data-label":"Type",className:"px-4 py-3 text-muted",children:[t.leaveType," ",t.dayOption&&`(${t.dayOption})`]}),e.jsxs("td",{"data-label":"Dates",className:"px-4 py-3 text-muted",children:[R(new Date(t.startDate.replace(/-/g,"/")),"dd MMM")," - ",R(new Date(t.endDate.replace(/-/g,"/")),"dd MMM")]}),e.jsx("td",{"data-label":"Raised On",className:"px-4 py-3 text-muted",children:t.createdAt?R(new Date(t.createdAt),"dd MMM, hh:mm a"):"N/A"}),e.jsx("td",{"data-label":"Reason",className:"px-4 py-3 text-muted whitespace-normal break-words max-w-sm",children:t.reason}),e.jsx("td",{"data-label":"Status",className:"px-4 py-3",children:e.jsx(Ue,{status:t.status,approverName:t.currentApproverName,approvalHistory:t.approvalHistory})}),e.jsx("td",{"data-label":"Actions",className:"px-4 py-3",children:e.jsx("div",{className:"flex md:justify-start justify-end",children:h===t.id?e.jsx(te,{className:"h-4 w-4 animate-spin"}):e.jsx(be,{request:t})})})]},t.id))})]})}),!D&&N>0&&e.jsxs("div",{className:"mt-8 flex flex-col md:flex-row justify-between items-center bg-card p-4 rounded-xl border border-border gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted",children:"Show"}),e.jsxs("select",{id:"pageSize",name:"pageSize","aria-label":"Rows per page",value:b,onChange:t=>{E(Number(t.target.value)),m(1)},className:"bg-page border border-border text-primary-text text-sm rounded-lg focus:ring-emerald-500 focus:border-emerald-500 block p-1.5 transition-all outline-none",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-muted",children:"per page"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"secondary",size:"sm",onClick:()=>m(t=>Math.max(1,t-1)),disabled:v===1,className:"p-2 h-9 w-9 rounded-lg",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-1 mx-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary-text",children:["Page ",v]}),e.jsxs("span",{className:"text-sm text-muted",children:["of ",Math.ceil(N/b)]})]}),e.jsx(c,{variant:"secondary",size:"sm",onClick:()=>m(t=>Math.min(Math.ceil(N/b),t+1)),disabled:v>=Math.ceil(N/b),className:"p-2 h-9 w-9 rounded-lg",children:e.jsx(Le,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-sm text-muted",children:["Total ",N," entries"]})]})]})};export{et as default};
