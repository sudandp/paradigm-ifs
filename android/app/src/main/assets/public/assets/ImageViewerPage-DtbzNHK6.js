import{j as e}from"./index-D5q3SS3D.js";import{u as j,j as g,b as c}from"./react-vendor-BUaIliXj.js";import{R as N,X as v,bf as k,bg as y,bR as C,$ as R}from"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";const P=()=>{const o=j(),[d]=g(),n=d.get("url")||"",l=d.get("title")||"Image Preview",[a,m]=c.useState(1),[x,b]=c.useState(0);c.useEffect(()=>{const t=r=>{r.key==="Escape"&&o(-1)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o]);const w=()=>m(t=>Math.min(t+.25,3)),u=()=>m(t=>Math.max(t-.25,.5)),p=()=>b(t=>(t+90)%360),f=async()=>{try{const r=await(await fetch(n)).blob(),h=window.URL.createObjectURL(r),s=document.createElement("a");s.href=h,s.download=l||"image",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(h),document.body.removeChild(s)}catch(t){console.error("Download failed:",t)}},i=()=>{o(-1)};return n?e.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/80 backdrop-blur-sm border-b border-white/10",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-white hover:text-white/80 transition-colors",children:[e.jsx(N,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Back"})]}),e.jsx("h1",{className:"text-white text-sm font-medium truncate max-w-[200px] sm:max-w-none",children:decodeURIComponent(l)}),e.jsx("button",{onClick:i,className:"p-2 text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Close",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto p-4",style:{touchAction:"manipulation"},children:e.jsx("img",{src:n,alt:decodeURIComponent(l),className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${a}) rotate(${x}deg)`},draggable:!1})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-black/80 backdrop-blur-sm border-t border-white/10",children:[e.jsx("button",{onClick:u,disabled:a<=.5,className:"p-3 text-white hover:bg-white/10 rounded-full transition-colors disabled:opacity-40 disabled:cursor-not-allowed","aria-label":"Zoom out",children:e.jsx(k,{className:"h-5 w-5"})}),e.jsxs("span",{className:"text-white text-sm font-medium min-w-[60px] text-center",children:[Math.round(a*100),"%"]}),e.jsx("button",{onClick:w,disabled:a>=3,className:"p-3 text-white hover:bg-white/10 rounded-full transition-colors disabled:opacity-40 disabled:cursor-not-allowed","aria-label":"Zoom in",children:e.jsx(y,{className:"h-5 w-5"})}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsx("button",{onClick:p,className:"p-3 text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Rotate",children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx("button",{onClick:f,className:"p-3 text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Download",children:e.jsx(R,{className:"h-5 w-5"})})]})]}):e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg",children:"No image to display"}),e.jsx("button",{onClick:i,className:"mt-4 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Go Back"})]})})};export{P as default};
