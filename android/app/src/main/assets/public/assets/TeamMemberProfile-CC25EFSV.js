import{m as A,j as e,B as V,u as Z,a1 as ee,P as te,J as se}from"./index-D5q3SS3D.js";import{b as d,l as ae,u as re}from"./react-vendor-BUaIliXj.js";import{$ as X,T as ie,d as B,F as Y,f as ne,O as G,t as q,M as le,m as oe,b as J}from"./ui-vendor-B8EvWqdc.js";import{f as C,s as de,e as K,p as w,d as _,i as Q,v as ce,F as me}from"./utils-vendor-DmorxLnX.js";import{U as xe}from"./UserDeviceList-Dt97HOJW.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./supabase-7WG3J4rU.js";import"./Modal-CR2aBU6L.js";import"./date-D8dFQo9a.js";const ue=({userId:n,userName:r,isManager:c=!1})=>{const[m,p]=d.useState([]),[k,T]=d.useState(!0),[x,M]=d.useState(null),[g,D]=d.useState(""),[h,S]=d.useState(!1);d.useEffect(()=>{$()},[n]);const $=async()=>{T(!0);try{const s=await A.getFieldViolations(n);p(s)}catch(s){console.error("Error loading violations:",s)}finally{T(!1)}},L=async s=>{if(!g.trim()){alert("Please provide notes for the acknowledgment");return}S(!0);try{await A.acknowledgeFieldViolation(s,g),D(""),M(null),$(),alert("Violation acknowledged successfully. Attendance has been granted for this day.")}catch(W){console.error("Error acknowledging violation:",W),alert("Failed to acknowledge violation")}finally{S(!1)}},I=async()=>{try{await A.exportFieldViolations(n,r)}catch(s){console.error("Error exporting violations:",s),alert("Failed to export violations")}};if(k)return e.jsx("div",{className:"p-8 text-center text-muted",children:"Loading violations..."});const U=m.filter(s=>s.status==="pending"),y=m.filter(s=>s.status==="acknowledged"),P=m.filter(s=>s.status==="escalated");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-text",children:"Field Staff Violations"}),e.jsx("p",{className:"text-sm text-muted",children:"Site time and working hours violations requiring manager acknowledgment"})]}),e.jsxs(V,{onClick:I,variant:"secondary",size:"sm",children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Export Report"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 border border-border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-orange-400",children:U.length})]}),e.jsx(ie,{className:"h-8 w-8 text-orange-400"})]})}),e.jsx("div",{className:"p-4 border border-border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted",children:"Acknowledged"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:y.length})]}),e.jsx(B,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"p-4 border border-border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted",children:"Escalated"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:P.length})]}),e.jsx(Y,{className:"h-8 w-8 text-red-400"})]})})]}),m.length===0?e.jsxs("div",{className:"text-center py-12 bg-card border border-border rounded-lg",children:[e.jsx(B,{className:"mx-auto h-12 w-12 text-green-400 mb-3"}),e.jsx("p",{className:"text-muted",children:"No violations found"})]}):e.jsx("div",{className:"overflow-x-auto border border-border rounded-lg",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/20 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Violation Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Total Hours"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Site %"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Travel %"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Required Site %"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Status"}),c&&e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-primary-text",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:m.map(s=>e.jsxs("tr",{className:"hover:bg-muted/10",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-primary-text",children:C(new Date(s.date),"MMM dd, yyyy")}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.violationType==="site_time_low"?"bg-orange-500/20 text-orange-400":"bg-red-500/20 text-red-400"}`,children:s.violationType==="site_time_low"?"Low Site Time":"Insufficient Hours"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-primary-text",children:[s.totalHours.toFixed(2)," hrs"]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("span",{className:s.sitePercentage<s.requiredSitePercentage?"text-red-400 font-medium":"text-green-400",children:[s.sitePercentage.toFixed(1),"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-primary-text",children:[s.travelPercentage.toFixed(1),"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted",children:[s.requiredSitePercentage,"%"]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="pending"?"bg-orange-500/20 text-orange-400":s.status==="acknowledged"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),c&&e.jsxs("td",{className:"px-4 py-3 text-sm",children:[s.status==="pending"&&e.jsx(V,{size:"sm",onClick:()=>M(s),children:"Acknowledge"}),s.status==="acknowledged"&&s.managerNotes&&e.jsx("button",{className:"text-blue-400 hover:text-blue-300 text-xs underline",onClick:()=>alert(s.managerNotes),children:"View Notes"})]})]},s.id))})]})}),x&&c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card border border-border rounded-lg max-w-lg w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-text mb-4",children:"Acknowledge Violation"}),e.jsxs("div",{className:"space-y-3 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"Date:"}),e.jsx("span",{className:"text-primary-text",children:C(new Date(x.date),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"Site Time:"}),e.jsxs("span",{className:"text-primary-text",children:[x.siteHours.toFixed(2)," hrs (",x.sitePercentage.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"Travel Time:"}),e.jsxs("span",{className:"text-primary-text",children:[x.travelHours.toFixed(2)," hrs (",x.travelPercentage.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"Required Site %:"}),e.jsxs("span",{className:"text-primary-text",children:[x.requiredSitePercentage,"%"]})]})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-blue-400",children:[e.jsx("strong",{children:"Note:"})," Acknowledging this violation will grant ",e.jsx("strong",{children:"(P) Present"})," status for this day and may affect salary/performance review."]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"acknowledgmentNotes",className:"block text-sm font-medium text-primary-text mb-2",children:"Manager Notes (Required)"}),e.jsx("textarea",{id:"acknowledgmentNotes",rows:4,value:g,onChange:s=>D(s.target.value),placeholder:"Provide reason for acknowledgment...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-primary-text focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(V,{onClick:()=>L(x.id),isLoading:h,disabled:!g.trim(),children:"Acknowledge & Grant Present"}),e.jsx(V,{variant:"secondary",onClick:()=>{M(null),D("")},children:"Cancel"})]})]})})]})},j=(n,r,c="N/A")=>{if(!n)return c;try{const m=w(n);return isNaN(m.getTime())?c:C(m,r)}catch{return c}},he=({lat:n,lng:r,fallback:c})=>{const[m,p]=d.useState(null),[k,T]=d.useState(!1);return d.useEffect(()=>{(async()=>{if(!(!c||c.startsWith("GPS:")||c==="Location Timeout"||c==="Location Unavailable"||c==="Unknown Site")){p(c);return}try{T(!0);const g=await se(n,r);p(g)}catch{p(c||`${n.toFixed(4)}, ${r.toFixed(4)}`)}finally{T(!1)}})()},[n,r,c]),k?e.jsx("span",{className:"animate-pulse text-accent/50 text-[10px]",children:"Resolving address..."}):e.jsx("span",{children:m||c||`${n.toFixed(4)}, ${r.toFixed(4)}`})},Te=()=>{const{id:n}=ae();re();const[r,c]=d.useState(null),[m,p]=d.useState([]),[k,T]=d.useState([]),[x,M]=d.useState(new Date),[g,D]=d.useState(!0),[h,S]=d.useState("activity"),{user:$}=Z(),L=d.useMemo(()=>!$||!r?!1:["admin","hr","operation_manager","developer"].includes($.role)?!0:r.reportingManagerId===$.id,[$,r]);d.useMemo(()=>r?.role?.toLowerCase()==="field_staff",[r]),d.useEffect(()=>{n&&I()},[n]),d.useEffect(()=>{n&&U()},[n,x]);const I=async()=>{try{const t=await A.getUserById(n);if(t){c(t);const l=await A.getLeaveRequests({userId:t.id});T(l.data||[])}}catch(t){console.error("Error fetching user details:",t)}},U=async()=>{if(n)try{D(!0);const t=de(x).toISOString(),l=K(x).toISOString(),o=await A.getLocationHistory(n,t,l);p(o)}catch(t){console.error("Error fetching activity log:",t)}finally{D(!1)}},y=d.useMemo(()=>{if(m.length===0)return[];const t=[...m].sort((i,u)=>i.timestamp.localeCompare(u.timestamp)).filter((i,u,f)=>{if(u===0)return!0;const N=f[u-1];return i.type!==N.type||i.timestamp!==N.timestamp}),l=[],o=[];let a=null;for(let i=0;i<t.length;i++){const u=t[i];if(u.type==="check-in")a||(a=u);else if(u.type==="check-out"&&a){const f=w(a.timestamp),N=w(u.timestamp),b=Math.max(0,_(N,f));let v=a.locationName||"Unknown Site";v==="Unknown Site"&&a.latitude&&a.longitude&&(v=`GPS: ${a.latitude.toFixed(4)}, ${a.longitude.toFixed(4)}`),l.push({id:`work-${a.id}`,type:"Work",startTime:a.timestamp,endTime:u.timestamp,duration:`${Math.floor(b/60)}h ${b%60}m`,durationMin:b,locationName:v,latitude:a.latitude,longitude:a.longitude}),a=null}}if(a){const u=Q(x,new Date)?new Date().toISOString():K(w(a.timestamp)).toISOString(),f=w(a.timestamp),N=w(u),b=Math.max(0,_(N,f));l.push({id:`work-${a.id}`,type:"Work",startTime:a.timestamp,endTime:u,duration:`${Math.floor(b/60)}h ${b%60}m`,durationMin:b,locationName:a.locationName||"Unknown Site",latitude:a.latitude,longitude:a.longitude})}for(let i=0;i<l.length-1;i++){const u=l[i],f=l[i+1],N=w(u.endTime),b=w(f.startTime),v=Math.max(0,_(b,N)),E=t.find(F=>F.timestamp===u.endTime&&F.type==="check-out"),R=t.find(F=>F.timestamp===f.startTime&&F.type==="check-in");let O=0;E?.latitude&&E?.longitude&&R?.latitude&&R?.longitude&&(O=ee(E.latitude,E.longitude,R.latitude,R.longitude)/1e3),(v>0||O>.05)&&o.push({id:`travel-${i}`,type:"Travel",startTime:u.endTime,endTime:f.startTime,duration:`${Math.floor(v/60)}h ${v%60}m`,durationMin:v,distance:Number(O.toFixed(2))})}return[...l,...o].sort((i,u)=>i.startTime.localeCompare(u.startTime))},[m,x]),P=d.useMemo(()=>{const t={};return k&&k.forEach(l=>{const o=l.createdAt||l.startDate;if(!o)return;const a=j(o,"MMMM yyyy");a!=="N/A"&&(t[a]||(t[a]=[]),t[a].push(l))}),t},[k]),s=d.useMemo(()=>{let t=0,l=0,o=0;return y.forEach(a=>{a.type==="Work"&&(l+=a.durationMin),a.type==="Travel"&&(o+=a.durationMin,t+=a.distance||0)}),{totalDistance:t.toFixed(2),workDuration:`${Math.floor(l/60)}h ${l%60}m`,travelTime:`${Math.floor(o/60)}h ${o%60}m`}},[y]),W=()=>{const t=[["Type","Start Time","End Time","Duration","Details/Location"].join(","),...y.map(i=>[i.type,j(i.startTime,"hh:mm a"),j(i.endTime,"hh:mm a"),i.duration,i.type==="Work"?`"${i.locationName}"`:`${i.distance} km`].join(","))].join(`
`),l=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`Activity_Report_${r?.name}_${C(x,"yyyyMMdd")}.csv`),document.body.appendChild(a),a.click(),document.body.removeChild(a)};return r?e.jsxs("div",{className:"flex flex-col min-h-screen bg-background text-primary-text",children:[e.jsx("div",{className:"bg-card border-b border-border shadow-soft sticky top-0 z-30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{photoUrl:r.photoUrl,seed:r.id,className:"w-12 h-12 rounded-full border-2 border-accent/20"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold leading-tight",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsx("span",{className:"text-[10px] sm:text-xs px-2 py-0.5 bg-accent/10 text-accent rounded-full font-bold uppercase tracking-wider",children:r.role.replace(/_/g," ")}),e.jsx("span",{className:"text-muted text-xs",children:"•"}),e.jsx("span",{className:"text-muted text-xs font-medium",children:r.email})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto overflow-x-auto pb-1 sm:pb-0 scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center bg-white border border-border p-1 rounded-xl shadow-inner-soft min-w-fit",children:[e.jsx("button",{onClick:()=>M(ce(x,1)),className:"p-1 px-2.5 bg-transparent hover:bg-accent/5 rounded-lg transition-colors font-bold",children:"←"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-xs sm:text-sm font-semibold",children:[e.jsx(ne,{className:"w-4 h-4 text-accent"}),C(x,"dd MMM, yyyy")]}),e.jsx("button",{onClick:()=>M(me(x,1)),disabled:Q(x,new Date),className:"p-1 px-2.5 bg-transparent hover:bg-accent/5 rounded-lg transition-colors font-bold disabled:opacity-20",children:"→"})]}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2.5 bg-accent text-white rounded-xl hover:bg-accent/90 transition-all font-bold text-xs sm:text-sm shadow-accent-soft whitespace-nowrap",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Report"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 -mb-[1px]",children:[e.jsxs("button",{onClick:()=>S("violations"),className:`relative px-4 py-2 text-sm font-bold transition-all rounded-t-lg ${h==="violations"?"text-accent":"text-primary-text hover:text-accent"}`,children:["Attendance Violations",h==="violations"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-accent rounded-full shadow-accent-soft"})]}),e.jsxs("button",{onClick:()=>S("activity"),className:`relative px-4 py-2 text-sm font-bold transition-all rounded-t-lg ${h==="activity"?"text-accent":"text-primary-text hover:text-accent"}`,children:["Daily Activity",h==="activity"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-accent rounded-full shadow-accent-soft"})]}),e.jsxs("button",{onClick:()=>S("devices"),className:`relative px-4 py-2 text-sm font-bold transition-all rounded-t-lg ${h==="devices"?"text-accent":"text-primary-text hover:text-accent"}`,children:["Device History",h==="devices"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-accent rounded-full shadow-accent-soft"})]}),e.jsxs("button",{onClick:()=>S("leaves"),className:`relative px-4 py-2 text-sm font-bold transition-all rounded-t-lg ${h==="leaves"?"text-accent":"text-primary-text hover:text-accent"}`,children:["Leave History",h==="leaves"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-accent rounded-full shadow-accent-soft"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto w-full p-4 md:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsx(H,{title:"Total Distance",value:`${s.totalDistance} km`,subtext:"Traveled across segments",icon:e.jsx(G,{className:"w-5 h-5"}),color:"bg-blue-500"}),e.jsx(H,{title:"Work Duration",value:s.workDuration,subtext:"Total time at site locations",icon:e.jsx(q,{className:"w-5 h-5"}),color:"bg-green-500"}),e.jsx(H,{title:"Travel Time",value:s.travelTime,subtext:"Total time spent commuting",icon:e.jsx(le,{className:"w-5 h-5"}),color:"bg-orange-500"}),e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-4 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-accent"}),"Day Insights"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{label:"First Check-in",value:j(m.find(t=>t.type==="check-in")?.timestamp,"hh:mm a")}),e.jsx(z,{label:"Last Event",value:j(m[m.length-1]?.timestamp,"hh:mm a")}),e.jsx(z,{label:"Sites Visited",value:new Set(y.filter(t=>t.type==="Work").map(t=>t.locationName)).size.toString()})]})]})]}),e.jsx("div",{className:"lg:col-span-8",children:e.jsx("div",{className:"bg-card border border-border rounded-2xl p-6 shadow-sm overflow-visible min-h-[500px]",children:h==="activity"?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-bold mb-6",children:"Activity Timeline"}),g?e.jsx("div",{className:"space-y-8 animate-pulse",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200"}),e.jsx("div",{className:"flex-1 h-20 bg-slate-100 rounded-xl"})]},t))}):y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-muted opacity-50 text-lg",children:[e.jsx(J,{className:"w-12 h-12 mb-3"}),e.jsx("p",{children:"No activity recorded for this day."})]}):e.jsxs("div",{className:"relative space-y-2",children:[e.jsx("div",{className:"absolute left-[15px] top-2 bottom-2 w-0.5 bg-gradient-to-b from-border via-border to-transparent"}),y.map(t=>e.jsxs("div",{className:"relative pl-10 pb-8 last:pb-0 text-base",children:[e.jsx("div",{className:`absolute left-0 top-1.5 w-8 h-8 rounded-full border-4 border-card flex items-center justify-center z-10 ${t.type==="Work"?"bg-green-500":"bg-orange-500"}`,children:t.type==="Work"?e.jsx(q,{className:"w-3 h-3 text-white"}):e.jsx(G,{className:"w-3 h-3 text-white"})}),e.jsx("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${t.type==="Work"?"bg-green-500/5 border-green-500/10 hover:border-green-500/30":"bg-orange-500/5 border-orange-500/10 hover:border-orange-500/30"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-0.5 rounded-full ${t.type==="Work"?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:t.type==="Work"?"At Location":"Travel"}),e.jsx("h4",{className:"font-bold",children:t.type==="Work"?t.latitude&&t.longitude?e.jsx(he,{lat:t.latitude,lng:t.longitude,fallback:t.locationName}):t.locationName:"Travel to next stop"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-muted",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3.5 h-3.5"}),j(t.startTime,"hh:mm a")," - ",j(t.endTime,"hh:mm a")]}),e.jsx("span",{className:"bg-background px-2 py-0.5 rounded-lg border border-border",children:t.duration})]})]})})]},t.id))]})]}):h==="leaves"?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-bold mb-6",children:"Leave Request History"}),Object.keys(P).length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-muted opacity-50 text-lg",children:[e.jsx(Y,{className:"w-12 h-12 mb-3"}),e.jsx("p",{children:"No leave requests found."})]}):e.jsx("div",{className:"space-y-8",children:Object.entries(P).map(([t,l])=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-accent px-2 py-1 bg-accent/5 rounded-lg inline-block",children:t}),e.jsx("div",{className:"space-y-3",children:l.map(o=>e.jsxs("div",{className:"p-4 rounded-xl border border-border bg-page/50 hover:bg-page transition-colors text-base",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",children:[o.leaveType," Leave"]}),e.jsxs("p",{className:"text-xs text-muted",children:[j(o.startDate,"dd MMM")," - ",j(o.endDate,"dd MMM, yyyy")]})]}),e.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-1 rounded-full ${o.status==="approved"?"bg-green-500 text-white":o.status==="rejected"?"bg-red-500 text-white":"bg-yellow-500 text-white"}`,children:o.status.replace(/_/g," ")})]}),e.jsxs("p",{className:"text-sm text-muted line-clamp-2 italic",children:['"',o.reason,'"']})]},o.id))})]},t))})]}):h==="devices"?e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsx(xe,{userId:r.id,userRole:r.role,canManage:L,showTitle:!0})}):h==="violations"?e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsx(ue,{userId:r.id,userName:r.name,isManager:L})}):null})})]})})]}):null},H=({title:n,value:r,subtext:c,icon:m,color:p})=>e.jsx("div",{className:"bg-card border border-border rounded-2xl p-5 shadow-sm hover:shadow-md transition-shadow group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl text-white shadow-sm ${p} group-hover:scale-110 transition-transform`,children:m}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted uppercase tracking-wider",children:n}),e.jsx("h4",{className:"text-xl font-extrabold",children:r}),e.jsx("p",{className:"text-[10px] text-muted mt-0.5",children:c})]})]})}),z=({label:n,value:r})=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted",children:n}),e.jsx("span",{className:"font-bold",children:r})]});export{Te as default};
