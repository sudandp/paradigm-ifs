import{h as D,w as P,j as e,B as t,m as b}from"./index-D5q3SS3D.js";import{l as L,u as O,b as r}from"./react-vendor-BUaIliXj.js";import{a2 as u,R as A,$ as I}from"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";const T=()=>{const{id:n}=L(),o=O(),[i,m]=r.useState(null),[f,c]=r.useState(!0),[C,R]=r.useState(!1),x=r.useRef(null),{data:p,setFormsGenerated:g}=D(),h=P(a=>a.currentLogo),[d,j]=r.useState(!1);r.useEffect(()=>{(async()=>{if(n&&!n.startsWith("draft_")){c(!0);const l=await b.getOnboardingDataById(n);m(l||null),c(!1)}else m(p),c(!1)})()},[n,p]);const v=async()=>{const a=x.current;if(a&&i){j(!0);try{const l=a.outerHTML,S={margin:0,filename:`Onboarding_Forms_${i?.personal.employeeId}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};await b.generatePdf(l,S)}catch(l){console.error("PDF generation failed:",l)}finally{j(!1)}}},y=()=>{g(!0),o(`/onboarding/add/review?id=${n}`)};if(f||d)return e.jsx("div",{className:"text-center p-10",children:e.jsx(u,{className:"h-8 w-8 animate-spin mx-auto"})});if(!i)return e.jsx("div",{className:"text-center p-10 text-red-500",children:"Could not find employee data."});const s=i,N=`${s.personal.firstName} ${s.personal.middleName||""} ${s.personal.lastName}`.replace(/\s+/g," ").trim(),w=s.family.find(a=>a.relation==="Father")?.name||"",k=s.family.find(a=>a.relation==="Spouse")?.name||"",E=s.family.find(a=>a.relation==="Mother")?.name||"";return e.jsx("div",{className:"bg-page",children:e.jsxs("div",{className:"max-w-4xl p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"bg-card p-4 rounded-xl shadow-card no-print mb-8 sticky top-4 z-10",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs(t,{type:"button",onClick:()=>o(-1),variant:"secondary",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Go Back"]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-bold text-lg",children:"Review Official Forms"}),e.jsx("p",{className:"text-sm text-muted",children:"Please confirm these details before submitting."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(t,{type:"button",onClick:v,variant:"outline",disabled:d,children:[d?e.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(I,{className:"mr-2 h-4 w-4"}),d?"Generating...":"Download"]}),e.jsx(t,{type:"button",onClick:y,children:"Confirm & Continue"})]})]})}),e.jsxs("div",{ref:x,className:"bg-white rounded-xl border border-border shadow-lg",children:[e.jsx("div",{className:"pdf-page p-8 font-serif text-sm text-black",children:e.jsxs("div",{className:"border-4 border-black p-6 h-full flex flex-col",children:[e.jsx("h1",{className:"text-center text-xl font-bold tracking-widest mb-8",children:"EMPLOYEE PERSONAL DATA"}),e.jsx("div",{className:"w-64 mx-auto border-2 border-black p-2 my-8",children:e.jsx("img",{src:h,alt:"Paradigm Logo",className:"w-full"})}),e.jsxs("div",{className:"mt-auto space-y-8 text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-48 font-bold",children:"EMPLOYEE'S NAME"})," : ",e.jsx("span",{className:"border-b border-black flex-1 ml-2",children:N})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-48 font-bold",children:"SITE"})," : ",e.jsx("span",{className:"border-b border-black flex-1 ml-2",children:s.organization.organizationName})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-48 font-bold",children:"DESIGNATION"})," : ",e.jsx("span",{className:"border-b border-black flex-1 ml-2",children:s.organization.designation})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-48 font-bold",children:"EMPLOYEE'S ID NO."})," : ",e.jsx("span",{className:"border-b border-black flex-1 ml-2",children:s.personal.employeeId})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-48 font-bold",children:"PF No."})," : ",e.jsx("span",{className:"border-b border-black flex-1 ml-2",children:s.uan.pfNumber||s.uan.uanNumber})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-48 font-bold",children:"ESI NO."})," : ",e.jsx("span",{className:"border-b border-black flex-1 ml-2",children:s.esi.esiNumber})]})]})]})}),e.jsx("div",{className:"page-break"}),e.jsx("div",{className:"pdf-page p-8 font-serif text-xs text-black",children:e.jsxs("div",{className:"border-2 border-black p-4 h-full relative",children:[e.jsx("div",{className:"absolute top-4 right-4 w-48",children:e.jsx("img",{src:h,alt:"Paradigm Logo",className:"w-full"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"font-bold",children:["EMPLOYEE ID No. : ",e.jsx("span",{className:"font-normal underline",children:s.personal.employeeId})]}),e.jsx("h1",{className:"text-center font-bold text-base tracking-wider",children:"PERSONAL DATA"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:["1. Name: ",e.jsx("span",{className:"underline",children:N})]}),e.jsxs("p",{children:["2. Father's Name: ",e.jsx("span",{className:"underline",children:w})]}),e.jsxs("p",{children:["3. Mother's Name: ",e.jsx("span",{className:"underline",children:E})]}),e.jsxs("p",{children:["4. Reference by: ",e.jsx("span",{className:"underline"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["5. Date of Birth: ",e.jsx("span",{className:"underline",children:s.personal.dob})]}),e.jsxs("p",{children:["6. Age: ",e.jsx("span",{className:"underline",children:s.personal.dob?new Date().getFullYear()-new Date(s.personal.dob).getFullYear():""})]})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["7. Qualification: ",e.jsx("span",{className:"underline",children:s.education[0]?.degree||""})]}),e.jsxs("p",{children:["8. Experience: ",e.jsx("span",{className:"underline"})]})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["9. Designation: ",e.jsx("span",{className:"underline",children:s.organization.designation})]}),e.jsxs("p",{children:["10. Net Salary Offered: ",e.jsx("span",{className:"underline",children:s.personal.salary?.toLocaleString("en-IN")})]})]}),e.jsxs("p",{children:["11. Present Address: ",e.jsx("span",{className:"underline",children:`${s.address.present.line1}, ${s.address.present.city}, ${s.address.present.state} - ${s.address.present.pincode}`})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["12. Permanent Address: ",e.jsx("span",{className:"underline",children:s.address.sameAsPresent?"Same as Present":`${s.address.permanent.line1}, ${s.address.permanent.city}`})]}),e.jsxs("p",{children:["Ph. No.: ",e.jsx("span",{className:"underline",children:s.personal.mobile})," Alternate Ph. No.: ",e.jsx("span",{className:"underline",children:s.personal.alternateMobile||""})]})]}),e.jsx("p",{children:"13. Left hand thumb impression"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 h-12 border border-black my-1",children:[e.jsx("div",{className:"border-r border-black"}),e.jsx("div",{className:"border-r border-black"}),e.jsx("div",{className:"border-r border-black"}),e.jsx("div",{})]}),e.jsx("p",{children:"14. Right hand thumb impression"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 h-12 border border-black my-1",children:[e.jsx("div",{className:"border-r border-black"}),e.jsx("div",{className:"border-r border-black"}),e.jsx("div",{className:"border-r border-black"}),e.jsx("div",{})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["15. Marital Status: ",e.jsx("span",{className:"underline",children:s.personal.maritalStatus})]}),e.jsxs("p",{children:["16. Name of the Spouse: ",e.jsx("span",{className:"underline",children:k})," Contact No.: ",e.jsx("span",{className:"underline"})]})]}),e.jsxs("p",{children:["17. Languages Known: to Speak ",e.jsx("span",{className:"underline"})," to Write ",e.jsx("span",{className:"underline"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["18. Date of Joining: ",e.jsx("span",{className:"underline",children:s.organization.joiningDate})]}),e.jsx("p",{children:"19. ID Card:"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["20. ESI Number: ",e.jsx("span",{className:"underline",children:s.esi.esiNumber})]}),e.jsxs("p",{children:["21. PF Number: ",e.jsx("span",{className:"underline",children:s.uan.pfNumber||s.uan.uanNumber})]})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("p",{children:"22. Uniform Details: "}),e.jsx("p",{children:"23. Shoe Details: "})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{children:["24. Name of the Site: ",e.jsx("span",{className:"underline",children:s.organization.organizationName})]}),e.jsx("p",{children:"25. Site / Estate Manager: "})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("p",{children:"26. Record enclosed: "}),e.jsx("p",{children:"28. Reference Name:"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("p",{children:"27. Hirer: "}),e.jsx("p",{className:"ml-24",children:"Reference Ph.:"})]}),e.jsxs("p",{children:["29. Emergency Contact Name: ",e.jsx("span",{className:"underline",children:s.personal.emergencyContactName})," Ph.: ",e.jsx("span",{className:"underline",children:s.personal.emergencyContactNumber})," Blood Group: ",e.jsx("span",{className:"underline",children:s.personal.bloodGroup})]})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between",children:[e.jsx("p",{children:"Employee Signature:"}),e.jsx("p",{children:"Documented by:"})]})]})})]})]})})};export{T as default};
