import{u as I,a as ke,m as L,k as Ce,c as Pe,o as Se,i as Te,j as e,T as oe,I as N,B as m,d as Ue,e as D}from"./index-D5q3SS3D.js";import{u as Ie,b as h}from"./react-vendor-BUaIliXj.js";import{A as ce}from"./AvatarUpload-DpWQSSa-.js";import{aH as B,L as y,d as g,w as de,a2 as me,m as $,b as he,a6 as xe,M as O,a as ue,U as Le}from"./ui-vendor-B8EvWqdc.js";import{f as Be}from"./utils-vendor-DmorxLnX.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./supabase-7WG3J4rU.js";import"./CameraCaptureModal-DQDGRnEP.js";const $e=Ue({name:D().required("Name is required"),email:D().email("Must be a valid email").required("Email is required"),phone:D().matches(/^[6-9][0-9]{9}$/,"Must be a valid 10-digit Indian mobile number").optional().nullable()}).defined(),Xe=()=>{const{user:a,updateUserProfile:C,isCheckedIn:n,isOnBreak:r,isAttendanceLoading:W,toggleCheckInStatus:Oe,logout:Fe,lastCheckInTime:_,lastCheckOutTime:V,firstBreakInTime:Q,lastBreakInTime:Re,lastBreakOutTime:G,totalBreakDurationToday:F,totalWorkingDurationToday:R,checkAttendanceStatus:P,dailyPunchCount:pe,isFieldCheckedIn:i,isFieldCheckedOut:f}=I(),{permissions:ge}=ke(),c=Ie(),[A,J]=h.useState(!1),[be,Ae]=h.useState(!1),[w,u]=h.useState(null),[Me,k]=h.useState("prompt"),[K,X]=h.useState(!1),[Y,Z]=h.useState(!1),[d,ee]=h.useState("none"),M=(pe||0)>=1,q=I(t=>t.isPunchUnlocked),fe=I(t=>t.dailyUnlockRequestCount);I(t=>t.approvedUnlockCount);const s=M&&!n&&!i&&!q,we=n||i,se=fe>=1,H=h.useRef(null),E=h.useRef(null),x=a?.role==="field_staff";h.useEffect(()=>{M&&!q&&L.getMyUnlockRequest().then(t=>{t&&(ee(t.status),t.status==="approved"&&P())})},[M,q,P]),h.useEffect(()=>{if(d==="pending"){const t=setInterval(()=>{L.getMyUnlockRequest().then(l=>{l&&(ee(l.status),l.status==="approved"&&P())})},5e3);return()=>clearInterval(t)}},[d,P]),h.useEffect(()=>{s&&d!=="pending"&&u({message:se?"Request manager approval for overtime (OT) punch.":"One punch-in allowed per day. Request approval for emergency punch.",type:"warning"})},[s,d,se]);const je=Ce("(max-width: 767px)");h.useEffect(()=>{const t=async()=>{if(!navigator.permissions?.query){k("prompt");return}try{const l=await navigator.permissions.query({name:"camera"}),p=await navigator.permissions.query({name:"geolocation"});l.state==="granted"&&p.state==="granted"?k("granted"):l.state==="denied"||p.state==="denied"?k("denied"):k("prompt");const T=()=>t();l.onchange=T,p.onchange=T}catch(l){console.warn("Permissions API not fully supported. Defaulting to 'prompt'.",l),k("prompt")}};t()},[]);const{register:j,handleSubmit:te,formState:{errors:v,isDirty:ae},getValues:He,trigger:Ee,reset:z}=Pe({resolver:Se($e),defaultValues:{name:a?.name||"",email:a?.email||"",phone:a?.phone||""}});h.useEffect(()=>{a&&z({name:a.name||"",email:a.email||"",phone:a.phone||""})},[a,z]);const re=async t=>{if(!a)return;const l=a.photoUrl;C({photoUrl:t?.preview});try{let p=null;t&&t.file&&(p=await new Promise((Ne,ye)=>{const U=new FileReader;U.onloadend=()=>Ne(U.result),U.onerror=ye,U.readAsDataURL(t.file)}));const T=await L.updateUser(a.id,{photoUrl:p});C(T),u({message:`Profile photo ${p?"updated":"removed"}.`,type:"success"})}catch(p){console.error(p),u({message:"Failed to save photo.",type:"error"}),C({photoUrl:l})}},ne=async t=>{if(a){J(!0);try{const l=await L.updateUser(a.id,t);C(l),z(t),u({message:"Profile updated successfully!",type:"success"})}catch{u({message:"Failed to update profile.",type:"error"})}finally{J(!1)}}},o=be,ie=()=>{window.location.hash="#/auth/logout"},b=t=>t?Be(new Date(t),"hh:mm a"):"--:--",S=t=>{t==="punch"?(H.current&&clearTimeout(H.current),X(!0),H.current=setTimeout(()=>X(!1),1e4)):(E.current&&clearTimeout(E.current),Z(!0),E.current=setTimeout(()=>Z(!1),1e4))};a&&(Te(a.role)||ge[a.role]?.includes("manage_tasks"));const ve=t=>t.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase());if(!a)return e.jsx("div",{children:"Loading user profile..."});const le=a.photoUrl?{preview:a.photoUrl,name:"Profile Photo",type:"image/jpeg",size:0}:null;return je?e.jsxs("div",{className:"p-4 space-y-8 md:bg-transparent bg-[#041b0f]",children:[w&&e.jsx(oe,{message:w.message,type:w.type,onDismiss:()=>u(null)}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx(ce,{file:le,onFileChange:re}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:a.name}),e.jsx("p",{className:"text-emerald-400/90 font-medium text-sm",children:a.role.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"fo-section-title mb-4",children:"Profile Details"}),e.jsxs("form",{onSubmit:te(ne),className:"space-y-4",children:[e.jsx(N,{label:"Full Name",id:"name",error:v.name?.message,registration:j("name"),autoComplete:"name"}),e.jsx(N,{label:"Email Address",id:"email",type:"email",error:v.email?.message,registration:j("email"),readOnly:!0,className:"!bg-gray-700/50",autoComplete:"email"}),e.jsx(N,{label:"Phone Number",id:"phone",type:"tel",error:v.phone?.message,registration:j("phone"),autoComplete:"tel"}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(m,{type:"submit",isLoading:A,disabled:!ae,children:"Save Changes"})})]})]}),a.role!=="management"&&e.jsxs("section",{className:`relative transition-all duration-500 ${r?"ring-2 ring-rose-500 ring-offset-2 ring-offset-[#041b0f] rounded-2xl":""}`,children:[r&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 z-20 bg-rose-600 text-white text-[10px] font-black px-3 py-1 rounded-full shadow-lg shadow-rose-900/50 animate-pulse uppercase tracking-tighter",children:"Active Break"}),e.jsx("h3",{className:"fo-section-title mb-4",children:"Work Hours Tracking"}),e.jsxs("div",{className:"bg-[#0f291e]/80 backdrop-blur-md rounded-2xl border border-white/5 p-5 shadow-xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 relative z-10",children:[e.jsxs("div",{className:"text-center p-3 bg-black/30 rounded-xl border border-white/10",children:[e.jsxs("p",{className:"text-[9px] text-emerald-400 mb-1 uppercase tracking-widest font-bold flex items-center justify-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"})," First In"]}),e.jsx("p",{className:"text-base font-bold text-white font-mono",children:b(_)})]}),e.jsxs("div",{className:"text-center p-3 bg-black/30 rounded-xl border border-white/10",children:[e.jsxs("p",{className:"text-[9px] text-rose-400 mb-1 uppercase tracking-widest font-bold flex items-center justify-center gap-1",children:[e.jsx(y,{className:"h-3 w-3"})," Last Out"]}),e.jsx("p",{className:"text-base font-bold text-white font-mono",children:b(V)})]}),e.jsxs("div",{className:"text-center p-3 bg-black/30 rounded-xl border border-white/10",children:[e.jsxs("p",{className:"text-[9px] text-blue-400 mb-1 uppercase tracking-widest font-bold flex items-center justify-center gap-1",children:[e.jsx(g,{className:"h-3 w-3"})," First B-In"]}),e.jsx("p",{className:"text-base font-bold text-white font-mono",children:b(Q)})]}),e.jsxs("div",{className:"text-center p-3 bg-black/30 rounded-xl border border-white/10",children:[e.jsxs("p",{className:"text-[9px] text-amber-400 mb-1 uppercase tracking-widest font-bold flex items-center justify-center gap-1",children:[e.jsx(g,{className:"h-3 w-3"})," Last B-Out"]}),e.jsx("p",{className:"text-base font-bold text-white font-mono",children:b(G)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 relative z-10",children:[e.jsxs("div",{className:"px-4 py-4 bg-blue-500/5 rounded-xl border border-blue-500/10 flex flex-col items-center justify-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold",children:"Total Break"})]}),e.jsx("p",{className:"text-lg font-bold text-white font-mono",children:F>0?`${Math.floor(F)}h ${Math.round(F%1*60)}m`:"0h 0m"})]}),e.jsxs("div",{className:"px-4 py-4 bg-emerald-500/5 rounded-xl border border-emerald-500/10 flex flex-col items-center justify-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500"}),e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold",children:"Total Work"})]}),e.jsx("p",{className:"text-lg font-bold text-white font-mono",children:R>0?`${Math.floor(R)}h ${Math.round(R%1*60)}m`:"0h 0m"})]})]}),W?e.jsx("div",{className:"flex items-center justify-center text-emerald-500 h-[60px] bg-black/20 rounded-xl border border-white/5",children:e.jsx(me,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-0.5",children:[e.jsx("button",{onClick:()=>S("punch"),className:"focus:outline-none hover:scale-110 transition-all active:scale-95 !bg-transparent !border-none !p-0 !shadow-none !ring-0 flex items-center justify-center",title:"Click for hint",children:e.jsx($,{className:"h-5 w-5 text-emerald-400"})}),K&&e.jsx("span",{className:"text-base italic text-emerald-100/70 font-medium leading-tight animate-in fade-in slide-in-from-left-2 duration-300",children:"Punch in is required when starting the day, and Punch out when the day ends"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 relative z-10",children:[e.jsxs("button",{onClick:()=>{if(s){if(d==="pending")return;c("/attendance/request-unlock");return}c("/attendance/check-in?workType=office")},disabled:n||r||o||s&&d==="pending",className:`
                                                        relative overflow-hidden rounded-xl border p-0 transition-all duration-300 active:scale-[0.98] shadow-lg
                                                        flex flex-col items-center justify-center gap-1 h-[72px]
                                                        ${s?"bg-gradient-to-br from-amber-500 to-orange-600 border-amber-400/30 shadow-amber-500/20":"bg-gradient-to-br from-emerald-500 to-teal-600 border-emerald-400/30 shadow-emerald-500/20"}
                                                        ${n||r||o||s&&d==="pending"?"opacity-50 grayscale cursor-not-allowed":"hover:brightness-110"}
                                                    `,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-white/20 to-transparent pointer-events-none"}),s?e.jsxs(e.Fragment,{children:[d==="pending"?e.jsx(he,{className:"h-6 w-6 text-white drop-shadow-sm"}):e.jsx(xe,{className:"h-6 w-6 text-white drop-shadow-sm"}),e.jsx("span",{className:"text-white font-bold text-sm tracking-wide drop-shadow-sm",children:d==="pending"?"PENDING":"REQUEST PUNCH IN"})]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:`h-6 w-6 text-white drop-shadow-sm ${n?"":"animate-pulse"}`}),e.jsx("span",{className:"text-white font-bold text-sm tracking-wide drop-shadow-sm",children:"PUNCH IN"})]})]}),e.jsxs("button",{onClick:()=>c("/attendance/check-out?workType=office"),disabled:!n||i||r||x&&!f||o||s,className:`
                                                        relative overflow-hidden rounded-xl border p-0 transition-all duration-300 active:scale-[0.98] shadow-lg
                                                        flex flex-col items-center justify-center gap-1 h-[72px]
                                                        ${!n||i||r||x&&!f||o||s?"bg-white/5 border-white/10 text-white/30 cursor-not-allowed opacity-50":"bg-gradient-to-br from-rose-500 to-pink-600 border-rose-400/30 shadow-rose-500/20 hover:brightness-110"}
                                                    `,children:[!(!we||i||r||o||s)&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-white/20 to-transparent pointer-events-none"}),e.jsx(y,{className:`h-6 w-6 ${!n||i||r||x&&!f||o||s?"text-white/30":"text-white drop-shadow-sm"}`}),e.jsx("span",{className:`font-bold text-sm tracking-wide ${!n||i||r||x&&!f||o||s?"text-white/30":"text-white drop-shadow-sm"}`,children:"PUNCH OUT"})]})]}),(a?.role==="field_staff"||a?.role==="operation_manager")&&n&&!s&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 pb-2 border-b border-white/5",children:[e.jsxs(m,{onClick:()=>c("/attendance/check-in?workType=field"),disabled:!n||i||r||o||s,variant:"primary",className:`attendance-action-btn !bg-blue-600 !border-blue-700 ${!n||i||r||s?"pointer-events-none opacity-50":""}`,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Site Check In"]}),e.jsxs(m,{onClick:()=>c("/attendance/check-out?workType=field"),disabled:!i||r||o||s,variant:"secondary",className:`attendance-action-btn !bg-amber-600 !border-amber-700 !text-white ${!i||r||s?"pointer-events-none opacity-50":""}`,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Site Check Out"]})]})]}),n&&e.jsxs("div",{className:"flex flex-col space-y-3 pt-2 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 px-0.5",children:[e.jsx("button",{onClick:()=>S("break"),className:"focus:outline-none hover:scale-110 transition-all active:scale-95 !bg-transparent !border-none !p-0 !shadow-none !ring-0 flex items-center justify-center",title:"Click for hint",children:e.jsx($,{className:"h-5 w-5 text-blue-400"})}),Y&&e.jsx("span",{className:"text-base italic text-blue-100/70 font-medium leading-tight animate-in fade-in slide-in-from-left-2 duration-300",children:"Break in when user goes for lunch is mandatory, or it will be a violation"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(m,{onClick:()=>c("/attendance/break-in"),disabled:(x?!i:!n)||r||o||s,variant:"primary",className:`attendance-action-btn !bg-emerald-600 !border-emerald-700 ${(x?!i:!n)||r||s?"pointer-events-none opacity-50":""}`,children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Break In"]}),e.jsxs(m,{onClick:()=>c("/attendance/break-out"),disabled:!r||o||s,variant:"primary",className:`attendance-action-btn !bg-emerald-600 !border-emerald-700 ${!r||s?"pointer-events-none opacity-50":""}`,children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Break Out"]})]})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"fo-section-title mb-4",children:"Account Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>c("/leaves/dashboard"),className:"w-full group relative overflow-hidden bg-gradient-to-br from-emerald-600 to-emerald-800 rounded-2xl py-3 px-4 flex items-center justify-between transition-all duration-300 active:scale-[0.98]",children:[e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"p-2 rounded-xl bg-white/20 text-white backdrop-blur-sm",children:e.jsx(ue,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-bold text-sm",children:"Leave Tracker"}),e.jsx("p",{className:"text-emerald-100 text-[10px] mt-0.5",children:"View history & balances"})]})]}),e.jsx("div",{className:"w-7 h-7 rounded-full bg-white/10 flex items-center justify-center text-white/70 group-hover:bg-white group-hover:text-emerald-700 transition-all",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("button",{onClick:async()=>{try{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.getRegistrations();for(let l of t)await l.unregister()}if("caches"in window){const t=await caches.keys();await Promise.all(t.map(l=>caches.delete(l)))}u({message:"Cache cleared! Reloading...",type:"success"}),setTimeout(()=>window.location.reload(),1e3)}catch(t){console.error("Failed to clear cache:",t),u({message:"Failed to clear cache. Try again.",type:"error"})}},className:"w-full group relative overflow-hidden bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl p-4 flex items-center justify-between transition-all duration-300 active:scale-[0.98]",children:[e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"p-3 rounded-xl bg-white/20 text-white backdrop-blur-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-bold text-base",children:"Clear Cache & Reload"}),e.jsx("p",{className:"text-blue-100 text-xs mt-0.5",children:"Fix loading issues"})]})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-white/70 group-hover:bg-white group-hover:text-blue-700 transition-all",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("button",{onClick:ie,className:"w-full group relative overflow-hidden bg-gradient-to-br from-rose-600 to-rose-800 rounded-2xl p-4 flex items-center justify-between transition-all duration-300 active:scale-[0.98]",children:[e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"p-3 rounded-xl bg-white/20 text-white backdrop-blur-sm",children:e.jsx(y,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-bold text-base",children:"Log Out"}),e.jsx("p",{className:"text-rose-100 text-xs mt-0.5",children:"Sign out of your account"})]})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-white/70 group-hover:bg-white group-hover:text-rose-700 transition-all",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]})]}):e.jsxs("div",{className:"w-full space-y-8",children:[w&&e.jsx(oe,{message:w.message,type:w.type,onDismiss:()=>u(null)}),e.jsxs("div",{className:"relative overflow-hidden md:bg-white md:p-6 md:rounded-2xl md:shadow-lg flex flex-col md:flex-row items-center gap-6 border border-gray-100",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-[#006b3f] border-b-4 border-[#005632] shadow-lg"}),e.jsx("div",{className:"relative z-10",children:e.jsx(ce,{file:le,onFileChange:re})}),e.jsxs("div",{className:"text-center md:text-left relative z-10 flex-1 mt-16 md:mt-0",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight drop-shadow-sm",children:a.name}),e.jsx("div",{className:"flex items-center justify-center md:justify-start gap-2 mt-2",children:e.jsx("span",{className:"px-2.5 py-0.5 rounded-full bg-emerald-600 text-white shadow-sm border border-emerald-500 text-xs md:text-sm font-bold",children:ve(a.role)})}),e.jsx("p",{className:"text-emerald-50/70 mt-2 font-medium text-sm md:text-base",children:a.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"md:bg-white md:p-6 md:rounded-2xl md:shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-1.5 bg-blue-50 rounded-lg",children:e.jsx(Le,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Profile Details"})]}),e.jsxs("form",{onSubmit:te(ne),className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(N,{label:"Full Name",id:"name",error:v.name?.message,registration:j("name"),className:"bg-gray-50 border-gray-200 focus:bg-white transition-colors",autoComplete:"name"}),e.jsx(N,{label:"Phone Number",id:"phone",type:"tel",error:v.phone?.message,registration:j("phone"),className:"bg-gray-50 border-gray-200 focus:bg-white transition-colors",autoComplete:"tel"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(N,{label:"Email Address",id:"email",type:"email",error:v.email?.message,registration:j("email"),readOnly:!0,className:"bg-gray-100/50 text-gray-500 cursor-not-allowed border-gray-200",autoComplete:"email"})})]}),e.jsx("div",{className:"flex justify-end pt-3 border-t border-gray-100",children:e.jsx(m,{type:"submit",isLoading:A,disabled:!ae,className:"px-6",children:"Save Changes"})})]})]}),a.role!=="management"&&e.jsxs("div",{className:`relative transition-all duration-500 md:bg-white md:p-6 md:rounded-2xl md:shadow-lg border ${r?"border-rose-500 ring-4 ring-rose-100":"border-gray-100"}`,children:[r&&e.jsx("div",{className:"absolute -top-3 left-6 z-20 bg-rose-600 text-white text-xs font-black px-4 py-1 rounded-full shadow-lg shadow-rose-600/30 animate-pulse uppercase tracking-widest",children:"On Break"}),e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-1.5 bg-purple-50 rounded-lg",children:e.jsx(de,{className:"h-5 w-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Work Hours Tracking"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"text-center bg-gray-50 p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wider flex items-center justify-center gap-1",children:[e.jsx(B,{className:"h-3 w-3 text-emerald-600"})," First Punch In"]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 font-mono",children:b(_)})]}),e.jsxs("div",{className:"text-center bg-gray-50 p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wider flex items-center justify-center gap-1",children:[e.jsx(y,{className:"h-3 w-3 text-rose-600"})," Last Punch Out"]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 font-mono",children:b(V)})]}),e.jsxs("div",{className:"text-center bg-gray-50 p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wider flex items-center justify-center gap-1",children:[e.jsx(g,{className:"h-3 w-3 text-blue-600"})," First B-In"]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 font-mono",children:b(Q)})]}),e.jsxs("div",{className:"text-center bg-gray-50 p-4 rounded-xl border border-gray-100 shadow-sm",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wider flex items-center justify-center gap-1",children:[e.jsx(g,{className:"h-3 w-3 text-amber-600"})," Last B-Out"]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 font-mono",children:b(G)})]})]}),W?e.jsx("div",{className:"flex items-center justify-center h-[56px] bg-gray-50 rounded-xl",children:e.jsx(me,{className:"h-6 w-6 animate-spin text-gray-400"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-0.5",children:[e.jsx("button",{onClick:()=>S("punch"),className:"focus:outline-none hover:scale-110 transition-all active:scale-95 !bg-transparent !border-none !p-0 !shadow-none !ring-0 flex items-center justify-center",title:"Click for hint",children:e.jsx($,{className:"h-5 w-5 text-emerald-600"})}),K&&e.jsx("span",{className:"text-base italic text-emerald-700 font-medium animate-in fade-in slide-in-from-left-2 duration-300",children:"Punch in is required when starting the day, and Punch out when the day ends"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"relative group",children:e.jsxs(m,{onClick:()=>{if(s){if(d==="pending")return;c("/attendance/request-unlock");return}a?.role==="field_staff"||a?.role==="operation_manager"?c("/attendance/check-in?workType=office"):c("/attendance/check-in")},variant:s?"secondary":"primary",className:`attendance-action-btn shadow-lg transition-all ${s?"!bg-amber-600 !border-amber-600 !text-white shadow-amber-100/20":"shadow-emerald-100/20"} ${n||r||o||s&&d==="pending"?"pointer-events-none opacity-50":""}`,disabled:n||r||o||s&&d==="pending",children:[s?d==="pending"?e.jsx(he,{className:"mr-2 h-4 w-4"}):e.jsx(xe,{className:"mr-2 h-4 w-4"}):e.jsx(B,{className:`mr-2 h-4 w-4 ${n?"":"animate-pulse"}`}),s?d==="pending"?"Pending":"Request Punch In":"Punch In"]})}),e.jsxs(m,{onClick:()=>c("/attendance/check-out?workType=office"),variant:"danger",className:`attendance-action-btn shadow-lg shadow-red-100/20 transition-all ${!n||i||r||x&&!f||s?"pointer-events-none opacity-50":""}`,disabled:!n||i||r||x&&!f||o||s,children:[e.jsx(y,{className:"mr-2 h-4 w-4"})," Punch Out"]})]}),a?.role==="field_staff"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs(m,{onClick:()=>c("/attendance/check-in?workType=field"),variant:"primary",className:`attendance-action-btn !bg-blue-600 hover:!bg-blue-700 !border-blue-600 shadow-lg shadow-blue-100/20 transition-all ${!n||i||r||s?"pointer-events-none opacity-50":""}`,disabled:!n||i||r||o||s,children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Site Check In"]}),e.jsxs(m,{onClick:()=>c("/attendance/check-out?workType=field"),variant:"secondary",className:`attendance-action-btn !bg-amber-600 hover:!bg-amber-700 !border-amber-600 !text-white shadow-lg shadow-amber-100/20 transition-all ${!i||r||s?"pointer-events-none opacity-50":""}`,disabled:!i||r||o||s,children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Site Check Out"]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-0.5",children:[e.jsx("button",{onClick:()=>S("break"),className:"focus:outline-none hover:scale-110 transition-all active:scale-95 !bg-transparent !border-none !p-0 !shadow-none !ring-0 flex items-center justify-center",title:"Click for hint",children:e.jsx($,{className:"h-5 w-5 text-blue-600"})}),Y&&e.jsx("span",{className:"text-base italic text-blue-700 font-medium animate-in fade-in slide-in-from-left-2 duration-300",children:"Break in when user goes for lunch is mandatory, or it will be a violation"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(m,{onClick:()=>c("/attendance/break-in"),variant:"primary",className:`attendance-action-btn !bg-emerald-600 hover:!bg-emerald-700 !border-emerald-600 shadow-lg shadow-emerald-100/20 transition-all ${(x?!i:!n)||r||s?"pointer-events-none opacity-50":""}`,disabled:(x?!i:!n)||r||o||s,children:[e.jsx(g,{className:"mr-2 h-4 w-4"})," Break In"]}),e.jsxs(m,{onClick:()=>c("/attendance/break-out"),variant:"primary",className:`attendance-action-btn !bg-emerald-600 hover:!bg-emerald-700 !border-emerald-600 shadow-lg shadow-emerald-100/20 transition-all ${!r||s?"pointer-events-none opacity-50":""}`,disabled:!r||o||s,children:[e.jsx(g,{className:"mr-2 h-4 w-4"})," Break Out"]})]})]})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"md:bg-white md:p-6 md:rounded-2xl md:shadow-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900",children:"Account Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(m,{onClick:()=>c("/leaves/dashboard"),variant:"secondary",className:"w-full justify-center py-3 bg-gray-50 hover:bg-gray-100 border-gray-200",title:"View your leave history and balances",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"})," Leave Tracker"]}),e.jsxs(m,{onClick:ie,variant:"danger",className:"w-full justify-center py-3",isLoading:A,children:[e.jsx(y,{className:"mr-2 h-4 w-4"})," Log Out"]})]})]})})]})]})};export{Xe as default};
