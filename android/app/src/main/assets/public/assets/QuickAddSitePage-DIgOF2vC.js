import{k as b,j as e,I as u,T as x,B as p,m as j}from"./index-D5q3SS3D.js";import{u as N,b as d}from"./react-vendor-BUaIliXj.js";import{bl as h}from"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";const A=()=>{const n=N(),g=b("(max-width: 767px)"),[t,o]=d.useState(""),[s,m]=d.useState(!1),[a,r]=d.useState(null),c=async i=>{if(i.preventDefault(),!!t.trim()){m(!0);try{const l={id:`SITE-${t.toUpperCase().replace(/\s/g,"").substring(0,4)}-${Date.now()%1e3}`,shortName:t.trim(),fullName:t.trim(),address:"To be configured",provisionalCreationDate:new Date().toISOString()};await j.createOrganization(l),r({message:`Provisional site '${t}' created.`,type:"success"}),setTimeout(()=>n("/admin/sites"),1500)}catch(l){const f=l?.message||l?.error?.message||"Failed to create site.";r({message:`Failed to create site: ${f}`,type:"error"})}finally{m(!1)}}};return g?e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("header",{className:"p-4 flex-shrink-0 fo-mobile-header",children:e.jsx("h1",{children:"Quick Add Site"})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"bg-card rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block bg-accent-light p-3 rounded-full mb-2",children:e.jsx(h,{className:"h-8 w-8 text-accent-dark"})}),e.jsx("h2",{className:"text-xl font-bold text-primary-text",children:"Quick Add Provisional Site"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Create a new site with a 90-day grace period."})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx(u,{label:"New Site Name",id:"quick-add-site-name",value:t,onChange:i=>o(i.target.value),placeholder:"e.g. New Project Site",required:!0,disabled:s,autoFocus:!0}),e.jsx("p",{className:"text-xs text-muted",children:"This will create a new site with a 90-day grace period to complete the full configuration."})]})]})}),e.jsxs("footer",{className:"p-4 flex-shrink-0 flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>n("/admin/sites"),disabled:s,className:"fo-btn-secondary px-6",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:c,disabled:s||!t.trim(),className:"fo-btn-primary flex-1",children:s?"Adding...":"Add Site"})]}),a&&e.jsx(x,{message:a.message,type:a.type,onDismiss:()=>r(null)})]}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-card w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"bg-accent-light p-3 rounded-full mr-4",children:e.jsx(h,{className:"h-8 w-8 text-accent-dark"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-text",children:"Quick Add Provisional Site"}),e.jsx("p",{className:"text-muted",children:"Create a new site with a 90-day grace period to complete the full configuration."})]})]}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsx(u,{label:"New Site Name",id:"quick-add-site-name",value:t,onChange:i=>o(i.target.value),placeholder:"e.g. New Project Site",required:!0,disabled:s,autoFocus:!0}),e.jsx("p",{className:"text-sm text-muted -mt-4",children:"This will create a new site with a 90-day grace period to complete the full configuration."}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex justify-end gap-3",children:[e.jsx(p,{type:"button",onClick:()=>n("/admin/sites"),variant:"secondary",disabled:s,children:"Cancel"}),e.jsx(p,{type:"submit",isLoading:s,disabled:!t.trim(),children:"Add Site"})]})]})]}),a&&e.jsx(x,{message:a.message,type:a.type,onDismiss:()=>r(null)})]})};export{A as default};
