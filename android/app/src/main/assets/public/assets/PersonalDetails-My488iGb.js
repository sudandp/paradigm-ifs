import{h as M,c as C,o as O,j as e,C as x,I as o,d as g,Q as A,e as r,S as u}from"./index-D5q3SS3D.js";import{m as D,b as f}from"./react-vendor-BUaIliXj.js";import{S as n}from"./Select-Dz12MdxG.js";import{A as B}from"./AvatarUpload-DpWQSSa-.js";import{F as E}from"./FormHeader-CSy2Sh-o.js";import{D as F}from"./DatePicker-D2ulOwJx.js";import{V as j}from"./VerifiedInput-CBziK85I.js";import"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";import"./CameraCaptureModal-DQDGRnEP.js";const I=g({employeeId:r().required(),firstName:r().required("First name is required"),middleName:r().optional(),lastName:r().required("Last name is required"),preferredName:r().optional(),dob:r().required("Date of birth is required"),gender:r().oneOf(["Male","Female","Other",""]).required("Gender is required"),maritalStatus:r().oneOf(["Single","Married","Divorced","Widowed",""]).required("Marital status is required"),bloodGroup:r().oneOf(["","A+","A-","B+","B-","AB+","AB-","O+","O-"]).required("Blood group is required"),mobile:r().required("Mobile number is required").matches(/^[6-9][0-9]{9}$/,"Must be a valid 10-digit Indian mobile number"),alternateMobile:r().optional().nullable(),email:r().email("Must be a valid email").required("Email is required"),idProofType:r().oneOf(["Aadhaar","PAN","Voter ID",""]).optional(),idProofNumber:r().optional(),photo:u().optional().nullable(),idProofFront:u().optional().nullable(),idProofBack:u().optional().nullable(),emergencyContactName:r().required("Emergency contact name is required"),emergencyContactNumber:r().required("Emergency contact number is required").matches(/^[6-9][0-9]{9}$/,"Must be a valid 10-digit number"),relationship:r().oneOf(["Spouse","Child","Father","Mother","Sibling","Other",""]).required("Relationship is required"),salary:A().typeError("Salary must be a number").min(0).required("Salary is required").nullable(),verifiedStatus:g().optional()}).defined(),z=()=>{const{onValidated:N}=D(),{data:s,updatePersonal:d,addOrUpdateEmergencyContactAsFamilyMember:y,setPersonalVerifiedStatus:m}=M(),{register:a,handleSubmit:S,formState:{errors:i},control:p,reset:b,watch:c}=C({resolver:O(I),defaultValues:s.personal}),h=c();f.useEffect(()=>{b(s.personal)},[s.personal,b]),f.useEffect(()=>{let t;const l=c(q=>{clearTimeout(t),t=window.setTimeout(()=>{d(q)},500)});return()=>{l.unsubscribe(),clearTimeout(t)}},[c,d]);const v=async t=>{d(t),y(),await N()};return e.jsxs("form",{onSubmit:S(v),id:"personal-form",children:[e.jsx("div",{className:"text-left",children:e.jsx(E,{title:"Personal Details",subtitle:"Please provide your personal information as per your official documents."})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 md:items-start",children:[e.jsx("div",{className:"flex-shrink-0 mx-auto md:mx-0",children:e.jsx(x,{name:"photo",control:p,render:({field:t})=>e.jsx(B,{file:t.value,onFileChange:l=>t.onChange(l)})})}),e.jsxs("div",{className:"w-full flex-grow grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-3",children:e.jsx(o,{label:"Employee ID",id:"employeeId",registration:a("employeeId"),error:i.employeeId?.message,readOnly:!0,className:"bg-gray-100"})}),e.jsx(j,{label:"First Name",id:"firstName",registration:a("firstName"),error:i.firstName?.message,isVerified:s.personal.verifiedStatus?.name===!0,hasValue:!!h.firstName,onManualInput:()=>m({name:!1})}),e.jsx(o,{label:"Middle Name (Optional)",id:"middleName",registration:a("middleName")}),e.jsx(j,{label:"Last Name",id:"lastName",registration:a("lastName"),error:i.lastName?.message,isVerified:s.personal.verifiedStatus?.name===!0,hasValue:!!h.lastName,onManualInput:()=>m({name:!1})}),e.jsx(o,{label:"Preferred Name (Optional)",id:"preferredName",registration:a("preferredName")}),e.jsx(x,{name:"dob",control:p,render:({field:t})=>e.jsx(F,{label:"Date of Birth",id:"dob",error:i.dob?.message,value:t.value,onChange:l=>{t.onChange(l),m({dob:!1})},maxDate:new Date})}),e.jsxs(n,{label:"Gender",id:"gender",registration:a("gender"),error:i.gender?.message,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"}),e.jsx("option",{children:"Other"})]}),e.jsxs(n,{label:"Marital Status",id:"maritalStatus",registration:a("maritalStatus"),error:i.maritalStatus?.message,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{children:"Single"}),e.jsx("option",{children:"Married"}),e.jsx("option",{children:"Divorced"}),e.jsx("option",{children:"Widowed"})]}),e.jsxs(n,{label:"Blood Group",id:"bloodGroup",registration:a("bloodGroup"),error:i.bloodGroup?.message,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{children:"A+"}),e.jsx("option",{children:"A-"}),e.jsx("option",{children:"B+"}),e.jsx("option",{children:"B-"}),e.jsx("option",{children:"AB+"}),e.jsx("option",{children:"AB-"}),e.jsx("option",{children:"O+"}),e.jsx("option",{children:"O-"})]}),e.jsx(o,{label:"Mobile Number",id:"mobile",type:"tel",registration:a("mobile"),error:i.mobile?.message}),e.jsx(o,{label:"Alternate Mobile (Optional)",id:"alternateMobile",type:"tel",registration:a("alternateMobile")}),e.jsx(o,{label:"Email Address",id:"email",type:"email",registration:a("email"),error:i.email?.message}),e.jsx(o,{label:"Monthly Salary (Gross)",id:"salary",type:"number",registration:a("salary"),error:i.salary?.message}),e.jsxs("div",{className:"md:col-span-3 pt-4 border-t",children:[e.jsx("h4",{className:"text-md font-semibold text-primary-text mb-4",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx(o,{label:"Contact Name",id:"emergencyContactName",registration:a("emergencyContactName"),error:i.emergencyContactName?.message}),e.jsx(o,{label:"Contact Number",id:"emergencyContactNumber",type:"tel",registration:a("emergencyContactNumber"),error:i.emergencyContactNumber?.message}),e.jsxs(n,{label:"Relationship",id:"relationship",registration:a("relationship"),error:i.relationship?.message,children:[e.jsx("option",{value:"",children:"Select Relationship"}),e.jsx("option",{children:"Spouse"}),e.jsx("option",{children:"Child"}),e.jsx("option",{children:"Father"}),e.jsx("option",{children:"Mother"}),e.jsx("option",{children:"Sibling"}),e.jsx("option",{children:"Other"})]})]})]})]})]})]})};export{z as default};
