import{z as ne,c as ce,o as oe,O as de,j as e,B as f,L as M,I as m,C as k,p as me,m as C,d as A,R as B,q as xe,e as n}from"./index-D5q3SS3D.js";import{u as pe,b as x}from"./react-vendor-BUaIliXj.js";import{S as z}from"./Select-Dz12MdxG.js";import{a as he}from"./html2pdf-DgNOHyuA.js";import{aw as ue,$ as be,R as L,U as T,z as q,A as E,at as Y,bC as fe,aB as ge,F as je,j as Ne}from"./ui-vendor-B8EvWqdc.js";import{G as g,f as _}from"./utils-vendor-DmorxLnX.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./supabase-7WG3J4rU.js";const ye=A({employeeName:n().required("Employee name is required"),employeeId:n().optional(),dateOfJoining:n().required("Date of joining is required"),designation:n().required("Designation is required"),companyName:n().required("Company name is required"),siteName:n().required("Site name is required"),dob:n().required("Date of birth is required"),gender:n().oneOf(["Male","Female","Other"]).required("Gender is required"),contactNumber:n().required("Contact number is required").matches(/^[0-9]{10}$/,"Must be a 10-digit number"),includeSpouse:B().optional(),spouseName:n().when("includeSpouse",{is:!0,then:r=>r.required("Spouse name is required"),otherwise:r=>r.optional()}),spouseDob:n().when("includeSpouse",{is:!0,then:r=>r.required("Spouse DOB is required").test("is-adult","Spouse must be at least 18 years old",S=>S?g(new Date,new Date(S))>=18:!1),otherwise:r=>r.optional()}),spouseGender:n().when("includeSpouse",{is:!0,then:r=>r.oneOf(["Male","Female"]).required("Spouse gender is required"),otherwise:r=>r.optional()}),spouseContact:n().when("includeSpouse",{is:!0,then:r=>r.required("Spouse contact is required").matches(/^[0-9]{10}$/,"Must be a 10-digit number"),otherwise:r=>r.optional()}),children:xe().of(A({name:n().required("Child name is required"),dob:n().required("Child DOB is required").test("is-eligible","Child must be 25 years or younger",r=>r?g(new Date,new Date(r))<=25:!1),gender:n().oneOf(["Male","Female","Other"]).required("Child gender is required")})).max(2,"Only 2 children allowed").optional(),acknowledged:B().oneOf([!0],"You must acknowledge the plan to continue").required()}),Ge=()=>{const r=pe(),[S,J]=x.useState([]),[H,F]=x.useState(!1),[U,V]=x.useState(!1),[l,W]=x.useState(null),[K,Q]=x.useState([]),[X,Z]=x.useState([]),[we,ee]=x.useState(!0),{isMobile:s}=ne();x.useEffect(()=>{(async()=>{try{const[a,o,u]=await Promise.all([C.getEntities(),C.getGroups(),C.getGMCRates()]);Q(a),Z(o),J(u)}catch(a){console.error("Failed to fetch data:",a)}finally{ee(!1)}})()},[]);const{register:c,control:j,handleSubmit:se,watch:d,trigger:ve,setValue:p,formState:{errors:i}}=ce({resolver:oe(ye),defaultValues:{includeSpouse:!1,children:[],acknowledged:!1}}),{fields:G,append:te,remove:ae}=de({control:j,name:"children"}),D=d("dob"),y=d("gender"),P=d("includeSpouse"),h=d("children");x.useEffect(()=>{P&&y&&(y==="Male"?p("spouseGender","Female"):y==="Female"&&p("spouseGender","Male"))},[y,P,p]);const w=x.useMemo(()=>D?g(new Date,new Date(D)):null,[D]),v=t=>t?g(new Date,new Date(t)):null,N=x.useMemo(()=>{let t=0;const a=[];if(a.push({name:"Employee",age:w,rate:200}),t+=200,d("includeSpouse")){const o=d("spouseDob"),u=o?g(new Date,new Date(o)):null;a.push({name:"Spouse",age:u,rate:200}),t+=200}return h&&h.length>0&&h.forEach((o,u)=>{const $=o.dob?g(new Date,new Date(o.dob)):null;a.push({name:`Child ${u+1}`,age:$,rate:150}),t+=150}),{breakdown:a,total:t}},[w,d("includeSpouse"),d("spouseDob"),JSON.stringify(h)]),re=async t=>{F(!0);try{const a=b=>{if(b===null||typeof b!="object")return b;if(Array.isArray(b))return b.map(a);const O={};for(const[ie,R]of Object.entries(b))O[ie]=R===""?null:a(R);return O},{includeSpouse:o,acknowledged:u,...$}=t,I={...a($),maritalStatus:o?"Married":"Single",employeeId:t.employeeId||`TEMP_${Math.random().toString(36).substring(2,9).toUpperCase()}`,plan_name:`GMC Family Cover (Total: ₹${N.total})`,premium_amount:N.total};await C.submitGmcPublicForm(I),W(I),V(!0)}catch(a){console.error("Failed to submit GMC form",a)}finally{F(!1)}},le=()=>{const t=document.getElementById("gmc-preview-content");if(!t)return;const a={margin:10,filename:`GMC_Form_${l?.employeeName}_${_(new Date,"yyyyMMdd")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};he().set(a).from(t).save()};return U?e.jsx("div",{className:`min-h-screen flex flex-col transition-colors duration-500 ${s?"bg-[#041b0f]":"bg-white"}`,children:e.jsxs("div",{className:`w-full flex-grow flex flex-col animate-fade-in ${s?"!bg-[#041b0f]":"bg-white"}`,children:[e.jsx("div",{className:`border-b border-border ${s?"!bg-transparent !border-white/10":"bg-white"}`,children:e.jsxs("div",{className:"w-full p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-accent-light rounded-full ring-8 ring-accent-light/50",children:e.jsx(ue,{className:"h-16 w-16 text-accent"})})}),e.jsx("h1",{className:`text-3xl font-bold mb-4 ${s?"text-white":"text-primary-text"}`,children:"Submission Successful!"}),e.jsx("p",{className:`${s?"text-gray-400":"text-muted"} mb-0`,children:"Thank you for submitting your GMC enrollment form. We have recorded your details and insurance plan choice."})]})}),e.jsx("div",{className:"w-full p-8 space-y-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-2xl mx-auto",children:[e.jsxs(f,{onClick:le,className:"flex-1 sm:flex-initial sm:px-10 flex items-center justify-center gap-3 h-14 !rounded-2xl !text-base shadow-lg shadow-accent/20",children:[e.jsx(be,{className:"h-5 w-5"}),"Download PDF Receipt"]}),e.jsxs(f,{variant:"secondary",onClick:()=>r("/auth/login"),className:"flex-1 sm:flex-initial sm:px-10 flex items-center justify-center gap-3 h-14 !rounded-2xl !text-base",children:[e.jsx(L,{className:"h-5 w-5"}),"Back to Login"]})]})}),e.jsx("div",{style:{position:"absolute",left:"-9999px",top:0},children:e.jsxs("div",{id:"gmc-preview-content",className:"p-12 text-left bg-white text-black",style:{width:"210mm",minHeight:"297mm"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-10 border-b-4 border-accent pb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-accent rounded-xl",children:e.jsx(M,{className:"h-12 text-white invert"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black uppercase tracking-tight",children:"Paradigm Services"}),e.jsx("p",{className:"text-[10px] text-accent font-bold uppercase tracking-[0.3em]",children:"Corporate Health Services"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"GMC ENROLLMENT RECORD"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-500",children:["Date: ",_(new Date,"dd MMM yyyy")]}),e.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["REF: GMC-",Math.random().toString(36).substring(7).toUpperCase()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 pb-2",children:[e.jsx(T,{className:"h-4 w-4 text-accent"}),e.jsx("h3",{className:"text-xs font-black text-gray-900 uppercase tracking-widest",children:"Employee Profile"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Full Name"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:l?.employeeName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Employee ID"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:l?.employeeId})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Designation"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:l?.designation})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Joining Date"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:l?.dateOfJoining})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Company"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:l?.companyName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Work Site"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:l?.siteName})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 pb-2",children:[e.jsx(q,{className:"h-4 w-4 text-accent"}),e.jsx("h3",{className:"text-xs font-black text-gray-900 uppercase tracking-widest",children:"Family Structure"})]}),e.jsxs("div",{className:"space-y-4",children:[l?.spouseName&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Spouse"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[l?.spouseName," (",l?.spouseGender,")"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"No. of Children"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:l?.children?.length||0})]})]})]})]}),l?.children&&l.children.length>0&&e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 pb-2 mb-4",children:[e.jsx(q,{className:"h-4 w-4 text-accent"}),e.jsx("h3",{className:"text-xs font-black text-gray-900 uppercase tracking-widest",children:"Children Details"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-6",children:l.children.map((t,a)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx("p",{className:"text-xs font-bold text-gray-800 mb-1",children:t.name}),e.jsxs("p",{className:"text-[10px] text-gray-500",children:[t.gender," • DOB: ",t.dob]})]},a))})]}),e.jsxs("div",{className:"p-8 bg-accent/5 rounded-2xl border-2 border-accent/10 mb-12 relative overflow-hidden",children:[e.jsx(E,{className:"absolute -right-6 -bottom-6 h-32 w-32 text-accent/10 transform -rotate-12"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-black text-accent uppercase tracking-[0.2em] mb-2",children:"Approved Insurance Policy"}),e.jsx("p",{className:"text-2xl font-black text-gray-900",children:l?.plan_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 font-medium",children:"Group Medical Cover • Age Based Tier"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Total Monthly Premium"}),e.jsxs("p",{className:"text-4xl font-black text-accent",children:["₹",l?.premium_amount]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-24 pt-16 border-t border-dashed border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 flex items-end justify-center border-b border-gray-300 mb-3 italic text-gray-400 text-sm",children:"Signed Electronically"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-900",children:"Employee Signature"}),e.jsx("p",{className:"text-[9px] text-gray-400 font-medium mt-1",children:l?.employeeName})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 flex items-end justify-center border-b border-gray-300 mb-3",children:e.jsx("div",{className:"p-2 border border-accent/20 rounded-md bg-accent/5 rotate-[-2deg]",children:e.jsx(M,{className:"h-6 opacity-40 invert grayscale"})})}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-900",children:"Authorized Signatory"}),e.jsx("p",{className:"text-[9px] text-gray-400 font-medium mt-1",children:"Paradigm Services HR"})]})]}),e.jsx("div",{className:"mt-20 text-center",children:e.jsx("p",{className:"text-[8px] text-gray-300 uppercase tracking-[0.5em]",children:"System Generated Receipt • No physical signature required"})})]})})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`min-h-screen flex flex-col transition-colors duration-500 ${s?"bg-[#041b0f]":"bg-white"}`,children:e.jsxs("div",{className:`w-full flex-grow flex flex-col animate-fade-in ${s?"!bg-[#041b0f]":"bg-white"}`,children:[e.jsx("header",{className:`border-b border-border bg-white relative ${s?"!bg-transparent !border-white/10":""}`,children:e.jsxs("div",{className:"w-full p-6 md:p-8 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between md:justify-start w-full md:w-auto",children:[e.jsxs(f,{variant:"secondary",size:"sm",onClick:()=>r("/public/forms"),className:`!rounded-xl ${s?"!bg-white/10 !border-white/20 !text-white":""}`,children:[e.jsx(L,{className:"h-5 w-5 mr-1"}),"Exit"]}),e.jsx("div",{className:"md:hidden invisible",children:e.jsx(f,{size:"sm",variant:"secondary",className:"opacity-0 pointer-events-none",children:"Exit"})})]}),e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 mt-[-12px] md:mt-0",children:e.jsx(M,{className:"h-8 md:h-10"})}),e.jsx("div",{className:"flex items-center justify-center md:justify-end gap-2 overflow-x-auto no-scrollbar scroll-smooth w-full md:w-auto"})]})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("div",{className:"w-full p-6 md:p-10",children:e.jsxs("form",{onSubmit:se(re,t=>{console.error("Validation Errors:",t);const a=Object.values(t).map(o=>o.message).join(`
`);alert(`Please fix the following errors:
${a}`)}),className:"space-y-12",children:[e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-2 ${s?"text-white":"text-primary-text"}`,children:"GMC Coverage Request"}),e.jsx("p",{className:`${s?"text-gray-400":"text-muted"} text-sm`,children:"Please provide your official employment and personal information."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsx(m,{label:"Full Name of Employee",placeholder:"As per salary documents",registration:c("employeeName"),error:i.employeeName?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsx(m,{label:"Employee ID",placeholder:"Refer Payslip (Leave blank for temp ID)",registration:c("employeeId"),error:i.employeeId?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsx(m,{type:"date",label:"Date of Joining",registration:c("dateOfJoining"),error:i.dateOfJoining?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsx(m,{label:"Employee Designation",placeholder:"As per pay slip",registration:c("designation"),error:i.designation?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsxs(z,{label:"Company/Organization",registration:c("companyName"),error:i.companyName?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label !mb-2":"",children:[e.jsx("option",{value:"",children:"Select company"}),X.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),e.jsxs(z,{label:"Current Site/Project",registration:c("siteName"),error:i.siteName?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label !mb-2":"",children:[e.jsx("option",{value:"",children:"Select site"}),K.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`text-sm font-semibold block mb-2 ${s?"text-white/60 text-[10px] uppercase tracking-widest":"text-primary-text"}`,children:"Gender"}),e.jsx(k,{name:"gender",control:j,render:({field:t})=>e.jsx("div",{className:`flex gap-2 p-1 border rounded-xl ${s?"bg-white/5 border-white/10":"bg-page border-border"}`,children:["Male","Female","Other"].map(a=>e.jsx("button",{type:"button",onClick:()=>t.onChange(a),className:`flex-1 py-2 px-3 rounded-lg text-sm font-bold transition-all ${t.value===a?s?"bg-accent text-white shadow-lg":"bg-white text-accent shadow-sm":s?"text-gray-500 hover:text-white":"text-muted hover:text-primary-text"}`,children:a},a))})}),i.gender&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:i.gender.message})]}),e.jsx(m,{type:"date",label:"Date of Birth",registration:c("dob"),error:i.dob?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsx(m,{label:"Contact Number",placeholder:"10 digit mobile",registration:c("contactNumber"),error:i.contactNumber?.message,maxLength:10,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""})]})]}),e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-2 ${s?"text-white":"text-primary-text"}`,children:"Employee Relationship Details"}),e.jsx("p",{className:`${s?"text-gray-400":"text-muted"} text-sm`,children:"Add eligible family members to your coverage."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between ${s?"bg-white/5 border-white/10":"bg-gray-50 border-border"}`,children:[e.jsx("p",{className:"text-sm font-bold opacity-70",children:"Add Member"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{className:`h-10 px-3 rounded-lg text-sm font-bold border transition-colors ${s?"bg-black text-white border-white/20":"bg-white text-primary-text border-gray-300"}`,onChange:t=>{const a=t.target.value;a==="Spouse"?d("includeSpouse")?alert("You can only add 1 Spouse."):p("includeSpouse",!0):a==="Child"&&(G.length>=2?alert("Maximum 2 children allowed."):te({name:"",dob:"",gender:"Male"})),t.target.value=""},children:[e.jsx("option",{value:"",children:"Select Relationship..."}),e.jsx("option",{value:"Spouse",children:"Spouse"}),e.jsx("option",{value:"Child",children:"Child"})]})})]}),e.jsx("div",{className:`p-6 rounded-2xl border relative ${s?"bg-white/5 border-white/10":"bg-white border-border shadow-sm"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(T,{className:"h-5 w-5 text-accent"}),e.jsxs("h3",{className:"font-bold text-lg",children:["Employee (Self) ",w!==null&&e.jsxs("span",{className:"text-sm opacity-60 font-normal ml-1",children:["(",w," Yrs)"]})]})]}),e.jsx("p",{className:"text-xs opacity-60",children:"Primary Policy Holder"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest opacity-50",children:"Premium"}),e.jsx("p",{className:"text-xl font-black text-accent",children:"₹200"})]})]})}),d("includeSpouse")&&e.jsxs("div",{className:`p-6 rounded-2xl border relative animate-slide-up ${s?"bg-white/5 border-white/10":"bg-white border-border shadow-sm"}`,children:[e.jsx("button",{type:"button",onClick:()=>{p("includeSpouse",!1),p("spouseName",void 0),p("spouseDob",void 0),p("spouseContact",void 0)},className:"absolute top-4 right-4 p-2 rounded-full hover:bg-red-50 text-red-500 transition-colors",children:e.jsx(Y,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6 pr-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-rose-500"}),e.jsxs("h3",{className:"font-bold text-lg",children:["Spouse ",v(d("spouseDob"))!==null&&e.jsxs("span",{className:"text-sm opacity-60 font-normal ml-1 text-gray-800",children:["(",v(d("spouseDob"))," Yrs)"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest opacity-50",children:"Premium"}),e.jsx("p",{className:"text-xl font-black text-accent",children:"₹200"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(m,{label:"Spouse Name",placeholder:"Husband/Wife full name",registration:c("spouseName"),error:i.spouseName?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsx(m,{label:"Spouse Contact",placeholder:"10 digit number",registration:c("spouseContact"),error:i.spouseContact?.message,maxLength:10,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsx(m,{type:"date",label:"Spouse DOB",registration:c("spouseDob"),error:i.spouseDob?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`text-sm font-semibold block mb-2 ${s?"text-white/60 text-[10px] uppercase tracking-widest":"text-primary-text"}`,children:"Spouse Gender"}),e.jsx(k,{name:"spouseGender",control:j,render:({field:t})=>e.jsxs("select",{...t,className:`w-full h-12 px-4 rounded-xl border-2 text-sm font-bold transition-all ${s?"bg-white/5 border-white/10 text-white shadow-lg":"bg-white border-border text-primary-text"}`,children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})})]})]})]}),G.map((t,a)=>e.jsxs("div",{className:`p-6 rounded-2xl border relative animate-slide-up ${s?"bg-white/5 border-white/10":"bg-white border-border shadow-sm"}`,children:[e.jsx("button",{type:"button",onClick:()=>ae(a),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-red-50 text-red-500 transition-colors",children:e.jsx(Y,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6 pr-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-blue-500"}),e.jsxs("h3",{className:"font-bold text-lg",children:["Child ",a+1," ",v(h?.[a]?.dob)!==null&&e.jsxs("span",{className:"text-sm opacity-60 font-normal ml-1 text-gray-800",children:["(",v(h?.[a]?.dob)," Yrs)"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest opacity-50",children:"Premium"}),e.jsx("p",{className:"text-xl font-black text-accent",children:"₹150"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(m,{label:"Child Name",registration:c(`children.${a}.name`),error:i.children?.[a]?.name?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsx(m,{type:"date",label:"Date of Birth",registration:c(`children.${a}.dob`),error:i.children?.[a]?.dob?.message,className:s?"public-form-input":"",labelClassName:s?"public-form-label":""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`text-sm font-semibold block mb-2 ${s?"text-white/60 text-[10px] uppercase tracking-widest":"text-primary-text"}`,children:"Gender"}),e.jsx(k,{name:`children.${a}.gender`,control:j,render:({field:o})=>e.jsxs("select",{...o,className:`w-full h-10 px-3 rounded-xl border text-sm font-bold ${s?"bg-white/5 border-white/10 text-white":"bg-white border-border text-primary-text"}`,children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})})]})]})]},t.id))]})]}),e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-2 ${s?"text-white":"text-primary-text"}`,children:"Plan Recommendation"}),e.jsx("p",{className:`${s?"text-gray-400":"text-muted"} text-sm`,children:"Your customized insurance tier based on verified records."})]}),N.total>0?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-accent to-accent-dark rounded-3xl text-white shadow-xl shadow-accent/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -right-10 -bottom-10 opacity-10 transform rotate-12",children:e.jsx(E,{className:"h-64 w-64"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"font-bold text-xs uppercase tracking-widest mb-6 opacity-80",children:"Premium Breakdown"}),e.jsx("div",{className:"space-y-3 mb-6",children:N.breakdown.map((t,a)=>e.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:t.name}),e.jsxs("p",{className:"text-xs opacity-70",children:["Age: ",t.age!==null?t.age:"--"," ",t.error&&e.jsxs("span",{className:"text-rose-300 ml-1",children:["(",t.error,")"]})]})]}),e.jsxs("p",{className:"font-bold text-lg",children:["₹",t.rate]})]},a))}),e.jsxs("div",{className:"pt-4 border-t border-white/20 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest opacity-70 mb-1",children:"Total Monthly Premium"}),e.jsxs("p",{className:"text-3xl font-black",children:["₹",N.total]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50 mb-1",children:"Rate Card"}),e.jsxs("div",{className:"flex gap-3 text-xs font-medium bg-white/10 px-3 py-1.5 rounded-lg border border-white/10",children:[e.jsx("span",{children:"Emp: ₹200"}),e.jsx("span",{className:"w-px h-3 bg-white/20"}),e.jsx("span",{children:"Spouse: ₹200"}),e.jsx("span",{className:"w-px h-3 bg-white/20"}),e.jsx("span",{children:"Child: ₹150"})]})]})]})]})]})}):e.jsxs("div",{className:"p-10 bg-rose-50 rounded-3xl border-2 border-dashed border-rose-200 text-center flex flex-col items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-rose-100 rounded-full",children:e.jsx(ge,{className:"h-10 w-10 text-rose-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-rose-900 text-lg",children:"Incomplete Data"}),e.jsx("p",{className:"text-rose-500 text-sm",children:"Please return to Step 1 and provide a valid Date of Birth."})]}),e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Fix Now"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5 text-accent"}),e.jsx("h3",{className:`font-bold ${s?"text-white":"text-primary-text"}`,children:"Declarations & Consent"})]}),e.jsxs("div",{className:`border rounded-2xl p-6 h-48 overflow-y-auto space-y-4 text-sm leading-relaxed thin-scrollbar ${s?"bg-white/5 border-white/10 text-gray-400":"bg-page border-border text-muted"}`,children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-accent-light text-accent flex items-center justify-center shrink-0 font-bold text-[10px]",children:"1"}),e.jsxs("p",{children:["I authorize ",e.jsx("strong",{children:"Paradigm Services"})," to enroll me and my declared family members (Spouse/Children) in the Group Medical Cover (GMC) policy."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-accent-light text-accent flex items-center justify-center shrink-0 font-bold text-[10px]",children:"2"}),e.jsx("p",{children:"I agree to the monthly premium deduction from my salary based on the age-based tier calculation displayed above."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-accent-light text-accent flex items-center justify-center shrink-0 font-bold text-[10px]",children:"3"}),e.jsx("p",{children:"I understand that medical claims and settlements are subject to insurers' verification of the relationship and age documents declared here."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-accent-light text-accent flex items-center justify-center shrink-0 font-bold text-[10px]",children:"4"}),e.jsx("p",{children:"All declarations made are truthful; any discrepancies found may lead to policy cancellation and corporate disciplinary action."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-accent-light text-accent flex items-center justify-center shrink-0 font-bold text-[10px]",children:"5"}),e.jsx("p",{children:"This coverage will be carried forward for upcoming months. If you work for even one day in a month, these premium charges will be deducted."})]})]}),e.jsxs("div",{className:`p-4 border rounded-xl shadow-sm ${s?"bg-white/5 border-white/10":"bg-white border-border"}`,children:[e.jsx(k,{name:"acknowledged",control:j,render:({field:t})=>e.jsx(me,{id:"acknowledged",label:"I verify my declarations and agree to the GMC enrollment terms.",labelClassName:`text-sm font-bold ${s?"text-white":"text-primary-text"}`,checked:t.value,onChange:t.onChange,inputClassName:s?"text-accent border-white/20 bg-black/40 rounded":""})}),i.acknowledged&&e.jsx("p",{className:"text-xs text-red-500 font-bold mt-2 ml-7",children:i.acknowledged.message})]})]})]}),e.jsx("div",{className:`flex flex-col sm:flex-row justify-end gap-4 pt-10 border-t ${s?"border-white/10":"border-border"}`,children:e.jsxs(f,{type:"submit",className:"w-full sm:w-64 h-12 !rounded-2xl !text-base !font-bold !shadow-lg shadow-accent/20",isLoading:H,children:["Confirm & Secure Enrollment",e.jsx(Ne,{className:"h-5 w-5 ml-2"})]})})]})}),e.jsx("footer",{className:`border-t flex flex-col md:flex-row items-center justify-between text-[10px] md:text-xs font-bold uppercase tracking-widest ${s?"bg-black/20 border-white/10 text-gray-500":"bg-gray-50/50 border-border text-muted"}`,children:e.jsxs("div",{className:"w-full p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-accent"}),e.jsx("span",{children:"Secure SSL encrypted connection"})]}),e.jsxs("span",{children:["© ",new Date().getFullYear()," Paradigm Services"]})]})})]})]})}),e.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                .thin-scrollbar::-webkit-scrollbar { width: 4px; }
                .thin-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .thin-scrollbar::-webkit-scrollbar-thumb { background: #E2E8F0; border-radius: 10px; }
                @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
                @keyframes scale-in { from { transform: scale(0.98); opacity: 0; } to { transform: scale(1); opacity: 1; } }
                .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
                .animate-scale-in { animation: scale-in 0.3s ease-out forwards; }
                .animate-slide-up { animation: slide-up 0.4s ease-out forwards; }
                @keyframes slide-up { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
            `})]})};export{Ge as default};
