import{j as e,T as w,m as S,l as k,P as C}from"./index-D5q3SS3D.js";import{b as i,u as P,L as E}from"./react-vendor-BUaIliXj.js";import{S as I}from"./StatusChip-B0urzFi1.js";import{S as d}from"./Skeleton-D0WWmlnq.js";import{R as L,aj as j,n as T,X as A,al as G,an as R}from"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";const F=({count:s=3})=>e.jsx("div",{className:"space-y-2.5",children:Array.from({length:s}).map((t,o)=>e.jsxs("div",{className:"bg-[#041b0f] md:bg-[#243524] p-3 rounded-xl flex gap-4 items-start border border-transparent",children:[e.jsx(d,{className:"w-12 h-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-grow space-y-2 mt-1",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsx(d,{className:"h-4 w-1/2"}),e.jsx(d,{className:"h-5 w-20 rounded-full"})]}),e.jsx(d,{className:"h-3 w-1/3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 mt-3 text-xs",children:[e.jsx(d,{className:"h-3 w-20"}),e.jsx(d,{className:"h-3 w-20"}),e.jsx(d,{className:"h-3 w-20"}),e.jsx(d,{className:"h-3 w-20"})]})]})]},o))}),f=({label:s,checked:t})=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[t?e.jsx(G,{className:"h-4 w-4 text-emerald-400"}):e.jsx(R,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-500",children:s})]}),$=({submission:s})=>{const{esiCtcThreshold:t}=k(),o=i.useMemo(()=>{const{personal:m,uan:r,esi:u,gmc:l}=s,x=m.salary!=null&&m.salary<=t;let n=!1;return x?n=!u.hasEsi||u.hasEsi&&!!u.esiNumber:l.isOptedIn===!0?n=!0:l.isOptedIn===!1&&(n=!!l.gmcPolicyCopy&&!!l.declarationAccepted),{aadhaar:!!m.idProofFront,uan:!r.hasPreviousPf||r.hasPreviousPf&&!!r.uanNumber,pf:!r.hasPreviousPf||r.hasPreviousPf&&!!r.uanNumber,esiGmc:n}},[s,t]);return e.jsx(E,{to:`/onboarding/add/personal?id=${s.id}`,className:"block focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[#041b0f] focus-visible:ring-emerald-400 rounded-xl",children:e.jsxs("div",{className:"bg-[#041b0f] md:bg-[#243524] p-3 rounded-xl flex gap-4 items-start border border-transparent hover:border-emerald-500 transition-colors duration-200",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 border-2 border-gray-600",children:e.jsx(C,{photoUrl:s.personal.photo?.preview,seed:s.id})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsx("p",{className:"font-semibold text-green-400",children:`${s.personal.firstName} ${s.personal.lastName}`}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{status:s.status})})]}),e.jsx("p",{className:"text-sm text-gray-400",children:s.personal.mobile}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 mt-3 text-xs",children:[e.jsx(f,{label:"Aadhaar",checked:o.aadhaar}),e.jsx(f,{label:"UAN",checked:o.uan}),e.jsx(f,{label:"PF",checked:o.pf}),e.jsx(f,{label:"ESI / GMC",checked:o.esiGmc})]})]})]})})},_=()=>{const[s,t]=i.useState([]),[o,m]=i.useState(!0),[r,u]=i.useState("in-progress"),[l,x]=i.useState(""),[n,b]=i.useState(null),h=P(),p=i.useRef(null);i.useEffect(()=>{(async()=>{m(!0);try{const c=await S.getVerificationSubmissions();t(c)}catch{b({message:"Failed to load submissions.",type:"error"})}finally{m(!1)}})()},[]);const g=i.useMemo(()=>{const a={"in-progress":["pending","draft","rejected"],existing:["verified"]};return s.filter(c=>a[r].includes(c.status)).filter(c=>`${c.personal.firstName} ${c.personal.lastName}`.toLowerCase().includes(l.toLowerCase())||c.personal.mobile?.toLowerCase().includes(l.toLowerCase()))},[s,r,l]),v=()=>{h("/onboarding/select-organization")},N=()=>{p.current?.focus()},y=[{key:"in-progress",label:"IN PROGRESS"},{key:"existing",label:"EXISTING"}];return e.jsxs("div",{className:"h-full flex flex-col bg-[#041b0f] text-white",children:[n&&e.jsx(w,{message:n.message,type:n.type,onDismiss:()=>b(null)}),e.jsxs("header",{className:"p-4 flex-shrink-0 flex items-center justify-between fo-mobile-header sticky top-0 z-10 bg-[#041b0f]/80 backdrop-blur-sm border-b border-[#374151]",children:[e.jsx("button",{onClick:()=>h("/onboarding"),"aria-label":"Go back",className:"p-2 rounded-full hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400",children:e.jsx(L,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-lg font-semibold",children:"On Boarding"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:N,"aria-label":"Search employee",className:"p-2 rounded-full hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400",children:e.jsx(j,{className:"h-6 w-6"})}),e.jsx("button",{onClick:v,"aria-label":"Add new employee",className:"p-2 rounded-full hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400",children:e.jsx(T,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>h("/profile"),"aria-label":"Exit to profile",className:"p-2 rounded-full hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400",children:e.jsx(A,{className:"h-6 w-6"})})]})]}),e.jsx("div",{className:"px-4 pt-4 pb-3 flex-shrink-0",children:e.jsx("div",{className:"flex",children:y.map(a=>e.jsx("button",{onClick:()=>u(a.key),className:`flex-1 py-2 text-sm font-semibold uppercase tracking-wider transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[#041b0f] focus-visible:ring-emerald-400 rounded-sm ${r===a.key?"border-b-2 border-emerald-400 text-emerald-400":"border-b-2 border-transparent text-gray-400 hover:text-white"}`,children:a.label},a.key))})}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-4 space-y-2.5 pb-24",children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500"}),e.jsx("input",{ref:p,type:"text",placeholder:"Search by name or number...",value:l,onChange:a=>x(a.target.value),className:"form-input w-full !pl-10 !h-12 !rounded-md"})]}),o?e.jsx("div",{className:"pt-4",children:e.jsx(F,{count:3})}):g.length>0?e.jsx("div",{className:"space-y-2.5",children:g.map(a=>e.jsx($,{submission:a},a.id))}):e.jsx("div",{className:"text-center pt-16 text-gray-500",children:e.jsxs("p",{children:["No ",r.replace("-"," ")," submissions found."]})})]})]})};export{_ as default};
