import{k as j,j as e,T as u,B as p,m as f}from"./index-D5q3SS3D.js";import{u as y,b as r}from"./react-vendor-BUaIliXj.js";import{F as h}from"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";const D=()=>{const c=y(),b=j("(max-width: 767px)"),[t,o]=r.useState(""),[n,m]=r.useState(""),[s,x]=r.useState(!1),[i,l]=r.useState(null),d=async a=>{if(a.preventDefault(),!!t.trim()){x(!0);try{await f.createPolicy({name:t.trim(),description:n.trim()}),l({message:"Policy created successfully!",type:"success"}),setTimeout(()=>c("/hr/policies-and-insurance"),1500)}catch{l({message:"Failed to save policy. Please try again.",type:"error"})}finally{x(!1)}}};return b?e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("header",{className:"p-4 flex-shrink-0 fo-mobile-header",children:e.jsx("h1",{children:"Add Policy"})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"bg-card rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block bg-accent-light p-3 rounded-full mb-2",children:e.jsx(h,{className:"h-8 w-8 text-accent-dark"})}),e.jsx("h2",{className:"text-xl font-bold text-primary-text",children:"Add New Policy"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Create a new policy for your organization."})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-muted mb-1",children:["Policy Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",value:t,onChange:a=>o(a.target.value),placeholder:"Policy Name (e.g., POSH)",className:"form-input",required:!0,disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-muted mb-1",children:"Description"}),e.jsx("textarea",{id:"description",value:n,onChange:a=>m(a.target.value),placeholder:"Description",className:"form-input",rows:4,disabled:s})]})]})]})}),e.jsxs("footer",{className:"p-4 flex-shrink-0 flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>c("/hr/policies-and-insurance"),disabled:s,className:"fo-btn-secondary px-6",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:d,disabled:s||!t.trim(),className:"fo-btn-primary flex-1",children:s?"Saving...":"Save Policy"})]}),i&&e.jsx(u,{message:i.message,type:i.type,onDismiss:()=>l(null)})]}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-card w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"bg-accent-light p-3 rounded-full mr-4",children:e.jsx(h,{className:"h-8 w-8 text-accent-dark"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-text",children:"Add New Policy"}),e.jsx("p",{className:"text-muted",children:"Create a new policy for your organization."})]})]}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-muted mb-1",children:["Policy Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",value:t,onChange:a=>o(a.target.value),placeholder:"Policy Name (e.g., POSH)",className:"form-input",required:!0,disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-muted mb-1",children:"Description"}),e.jsx("textarea",{id:"description",value:n,onChange:a=>m(a.target.value),placeholder:"Description",className:"form-input",rows:4,disabled:s})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex justify-end gap-3",children:[e.jsx(p,{type:"button",onClick:()=>c("/hr/policies-and-insurance"),variant:"secondary",disabled:s,children:"Cancel"}),e.jsx(p,{type:"submit",isLoading:s,disabled:!t.trim(),children:"Save Policy"})]})]})]}),i&&e.jsx(u,{message:i.message,type:i.type,onDismiss:()=>l(null)})]})};export{D as default};
