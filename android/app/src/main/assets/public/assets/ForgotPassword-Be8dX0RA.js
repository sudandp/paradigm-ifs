import{u as p,c as g,o as f,j as e,I as w,B as b,d as j,e as v}from"./index-D5q3SS3D.js";import{b as a,u as y,L as N}from"./react-vendor-BUaIliXj.js";import{a8 as S,a5 as E}from"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";const k=j({email:v().email("Must be a valid email").required("Email is required")}).defined(),M=()=>{const{sendPasswordReset:m}=p(),[r,i]=a.useState(""),[t,o]=a.useState(!1),l=y();a.useEffect(()=>{if(t){const s=setTimeout(()=>{l("/auth/login",{replace:!0})},3e3);return()=>clearTimeout(s)}},[t,l]);const{register:c,handleSubmit:d,formState:{errors:u,isSubmitting:x}}=g({resolver:f(k)}),h=async s=>{i("");const{error:n}=await m(s.email);n&&n.message.includes("rate limit")?i("Too many attempts. Please wait a few minutes before trying again."):o(!0)};return t?e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"mx-auto h-12 w-12 text-accent"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-white",children:"Check your email"}),e.jsx("p",{className:"mt-2 text-sm text-gray-300",children:"If an account exists for the email you provided, we've sent password reset instructions. Redirecting to login..."})]}):e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:d(h),className:"space-y-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(E,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400 group-focus-within:text-[#22c55e] transition-colors pointer-events-none z-10"}),e.jsx(w,{id:"email",type:"email",autoComplete:"email",placeholder:"Email Address","aria-label":"Email Address",registration:c("email"),error:u.email?.message,className:"!pl-12 !bg-white/10 !text-white !border-white/20 placeholder:!text-gray-400 focus:!border-[#22c55e] !py-3 !rounded-xl transition-all"})]}),r&&e.jsx("p",{className:"text-sm text-red-400 text-center",children:r}),e.jsx("div",{children:e.jsx(b,{type:"submit",className:"w-full",isLoading:x,size:"lg",children:"Send Reset Link"})}),e.jsx("div",{className:"text-center",children:e.jsx(N,{to:"/auth/login",className:"text-sm font-medium text-white/80 hover:text-white",children:"‚Üê Back to Login"})})]})})};export{M as default};
