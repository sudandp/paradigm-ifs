import{k as C,j as e,T as b,B as j,m as S}from"./index-D5q3SS3D.js";import{u as k,b as l}from"./react-vendor-BUaIliXj.js";import{S as y}from"./Select-Dz12MdxG.js";import{bP as g}from"./ui-vendor-B8EvWqdc.js";import"./pdf-vendor-CB_F1AVu.js";import"./capacitor-vendor-CqiIOUn1.js";import"./utils-vendor-DmorxLnX.js";import"./supabase-7WG3J4rU.js";const q=()=>{const c=k(),v=C("(max-width: 767px)"),[x,N]=l.useState([]),[t,p]=l.useState(""),[r,u]=l.useState(""),[n,f]=l.useState(""),[a,h]=l.useState(!1),[o,i]=l.useState(null),m=async s=>{if(s.preventDefault(),!(!t||!r||!n.trim())){h(!0);try{console.log("Granting comp off:",{userId:t,days:r,reason:n}),i({message:"Comp off granted successfully!",type:"success"}),setTimeout(()=>c("/hr/leave-management"),1500)}catch{i({message:"Failed to grant comp off.",type:"error"})}finally{h(!1)}}};return l.useEffect(()=>{(async()=>{try{const d=await S.getUsers();N(d)}catch{i({message:"Failed to load users.",type:"error"})}})()},[]),v?e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("header",{className:"p-4 flex-shrink-0 fo-mobile-header",children:e.jsx("h1",{children:"Grant Comp Off"})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"bg-card rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block bg-accent-light p-3 rounded-full mb-2",children:e.jsx(g,{className:"h-8 w-8 text-accent-dark"})}),e.jsx("h2",{className:"text-xl font-bold text-primary-text",children:"Grant Compensatory Off"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Grant comp off days to an employee."})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs(y,{label:"Select Employee",id:"user",value:t,onChange:s=>p(s.target.value),error:!t&&t!==""?"Please select an employee":"",children:[e.jsx("option",{value:"",children:"Select an employee"}),x.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.role]},s.id))]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"days",className:"block text-sm font-medium text-muted mb-1",children:["Number of Days ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"days",type:"number",step:"0.5",min:"0.5",value:r,onChange:s=>u(s.target.value),placeholder:"e.g. 1, 0.5, 2",className:"form-input",required:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reason",className:"block text-sm font-medium text-muted mb-1",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"reason",value:n,onChange:s=>f(s.target.value),placeholder:"Reason for granting comp off",className:"form-input",rows:4,required:!0,disabled:a})]})]})]})}),e.jsxs("footer",{className:"p-4 flex-shrink-0 flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>c("/hr/leave-management"),disabled:a,className:"fo-btn-secondary px-6",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:m,disabled:a||!t||!r||!n.trim(),className:"fo-btn-primary flex-1",children:a?"Granting...":"Grant Comp Off"})]}),o&&e.jsx(b,{message:o.message,type:o.type,onDismiss:()=>i(null)})]}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-card w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"bg-accent-light p-3 rounded-full mr-4",children:e.jsx(g,{className:"h-8 w-8 text-accent-dark"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-text",children:"Grant Compensatory Off"}),e.jsx("p",{className:"text-muted",children:"Grant comp off days to an employee."})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs(y,{label:"Select Employee",id:"user",value:t,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"",children:"Select an employee"}),x.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.role]},s.id))]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"days",className:"block text-sm font-medium text-muted mb-1",children:["Number of Days ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"days",type:"number",step:"0.5",min:"0.5",value:r,onChange:s=>u(s.target.value),placeholder:"e.g. 1, 0.5, 2",className:"form-input",required:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reason",className:"block text-sm font-medium text-muted mb-1",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"reason",value:n,onChange:s=>f(s.target.value),placeholder:"Reason for granting comp off",className:"form-input",rows:4,required:!0,disabled:a})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex justify-end gap-3",children:[e.jsx(j,{type:"button",onClick:()=>c("/hr/leave-management"),variant:"secondary",disabled:a,children:"Cancel"}),e.jsx(j,{type:"submit",isLoading:a,disabled:!t||!r||!n.trim(),children:"Grant Comp Off"})]})]})]}),o&&e.jsx(b,{message:o.message,type:o.type,onDismiss:()=>i(null)})]})};export{q as default};
